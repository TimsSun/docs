<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>厄索斯</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/icon.png">
    <meta name="description" content="厄索斯">
    
    <link rel="preload" href="/assets/css/0.styles.2a74c09d.css" as="style"><link rel="preload" href="/assets/js/app.79e3517d.js" as="script"><link rel="preload" href="/assets/js/7.dfd2726a.js" as="script"><link rel="preload" href="/assets/js/18.5a6cf3fc.js" as="script"><link rel="prefetch" href="/assets/js/1.051e21bd.js"><link rel="prefetch" href="/assets/js/10.5bd8d79c.js"><link rel="prefetch" href="/assets/js/100.46cb0b11.js"><link rel="prefetch" href="/assets/js/101.5634400b.js"><link rel="prefetch" href="/assets/js/102.4a9f18fc.js"><link rel="prefetch" href="/assets/js/103.55fe04cb.js"><link rel="prefetch" href="/assets/js/104.c9480d00.js"><link rel="prefetch" href="/assets/js/105.4a6f489e.js"><link rel="prefetch" href="/assets/js/106.b4c616bc.js"><link rel="prefetch" href="/assets/js/107.e9a1ac6f.js"><link rel="prefetch" href="/assets/js/108.bd09dea1.js"><link rel="prefetch" href="/assets/js/109.0437876e.js"><link rel="prefetch" href="/assets/js/11.5dcfe499.js"><link rel="prefetch" href="/assets/js/110.ad3e004b.js"><link rel="prefetch" href="/assets/js/111.0dc0f626.js"><link rel="prefetch" href="/assets/js/112.7552b929.js"><link rel="prefetch" href="/assets/js/113.e1614162.js"><link rel="prefetch" href="/assets/js/114.023a8c44.js"><link rel="prefetch" href="/assets/js/115.03a143a4.js"><link rel="prefetch" href="/assets/js/116.b5615171.js"><link rel="prefetch" href="/assets/js/117.d737b084.js"><link rel="prefetch" href="/assets/js/118.67ae323e.js"><link rel="prefetch" href="/assets/js/119.07626328.js"><link rel="prefetch" href="/assets/js/12.28d43d06.js"><link rel="prefetch" href="/assets/js/120.183f3d5c.js"><link rel="prefetch" href="/assets/js/121.1d4a8cbc.js"><link rel="prefetch" href="/assets/js/122.546b1f81.js"><link rel="prefetch" href="/assets/js/123.c100453d.js"><link rel="prefetch" href="/assets/js/124.0d5bff4a.js"><link rel="prefetch" href="/assets/js/125.ae3b2813.js"><link rel="prefetch" href="/assets/js/126.58854f41.js"><link rel="prefetch" href="/assets/js/127.c5fd54a6.js"><link rel="prefetch" href="/assets/js/128.8e7e317e.js"><link rel="prefetch" href="/assets/js/129.69bbbb1a.js"><link rel="prefetch" href="/assets/js/13.48da9a7e.js"><link rel="prefetch" href="/assets/js/130.79d03516.js"><link rel="prefetch" href="/assets/js/131.f8e8bb11.js"><link rel="prefetch" href="/assets/js/132.16796cfa.js"><link rel="prefetch" href="/assets/js/133.1762f502.js"><link rel="prefetch" href="/assets/js/134.2c75e6d1.js"><link rel="prefetch" href="/assets/js/135.ce60109a.js"><link rel="prefetch" href="/assets/js/136.136627ba.js"><link rel="prefetch" href="/assets/js/137.aad32e53.js"><link rel="prefetch" href="/assets/js/138.f2a1698c.js"><link rel="prefetch" href="/assets/js/139.ec32b4a5.js"><link rel="prefetch" href="/assets/js/14.6b65eb55.js"><link rel="prefetch" href="/assets/js/140.77bb7d0b.js"><link rel="prefetch" href="/assets/js/141.e4916cd7.js"><link rel="prefetch" href="/assets/js/142.5c933e26.js"><link rel="prefetch" href="/assets/js/143.cbae16e7.js"><link rel="prefetch" href="/assets/js/144.7ce5398c.js"><link rel="prefetch" href="/assets/js/145.39bc149a.js"><link rel="prefetch" href="/assets/js/146.00679b7f.js"><link rel="prefetch" href="/assets/js/147.ba941640.js"><link rel="prefetch" href="/assets/js/148.0dc64e74.js"><link rel="prefetch" href="/assets/js/149.e35ab41d.js"><link rel="prefetch" href="/assets/js/15.9e751693.js"><link rel="prefetch" href="/assets/js/150.d56d227c.js"><link rel="prefetch" href="/assets/js/151.b0a31d2e.js"><link rel="prefetch" href="/assets/js/152.53496e3d.js"><link rel="prefetch" href="/assets/js/153.bd1a0b33.js"><link rel="prefetch" href="/assets/js/154.c1c1bf59.js"><link rel="prefetch" href="/assets/js/155.75ba0e29.js"><link rel="prefetch" href="/assets/js/156.cae28489.js"><link rel="prefetch" href="/assets/js/157.5acee1ed.js"><link rel="prefetch" href="/assets/js/158.88dc7d79.js"><link rel="prefetch" href="/assets/js/159.c58420e2.js"><link rel="prefetch" href="/assets/js/16.339ee9f2.js"><link rel="prefetch" href="/assets/js/160.1f300f94.js"><link rel="prefetch" href="/assets/js/161.b2c8a48c.js"><link rel="prefetch" href="/assets/js/162.e516a5d3.js"><link rel="prefetch" href="/assets/js/163.da33da86.js"><link rel="prefetch" href="/assets/js/164.a8205f3b.js"><link rel="prefetch" href="/assets/js/165.03307d64.js"><link rel="prefetch" href="/assets/js/166.2b8eec49.js"><link rel="prefetch" href="/assets/js/167.568b79dd.js"><link rel="prefetch" href="/assets/js/168.8e4e1c56.js"><link rel="prefetch" href="/assets/js/169.6eb0b952.js"><link rel="prefetch" href="/assets/js/17.ef6780d1.js"><link rel="prefetch" href="/assets/js/170.1444a549.js"><link rel="prefetch" href="/assets/js/171.d87075e3.js"><link rel="prefetch" href="/assets/js/172.f5997d4a.js"><link rel="prefetch" href="/assets/js/173.2a87dc17.js"><link rel="prefetch" href="/assets/js/174.fc6ca112.js"><link rel="prefetch" href="/assets/js/175.de019960.js"><link rel="prefetch" href="/assets/js/176.056ff311.js"><link rel="prefetch" href="/assets/js/177.781eda77.js"><link rel="prefetch" href="/assets/js/178.d81bed35.js"><link rel="prefetch" href="/assets/js/179.bf4a43fc.js"><link rel="prefetch" href="/assets/js/180.b3a33428.js"><link rel="prefetch" href="/assets/js/181.ca7e8200.js"><link rel="prefetch" href="/assets/js/182.6ba036cf.js"><link rel="prefetch" href="/assets/js/183.98725fdc.js"><link rel="prefetch" href="/assets/js/184.c5dd85ed.js"><link rel="prefetch" href="/assets/js/185.6652dfba.js"><link rel="prefetch" href="/assets/js/186.5e5e6d4f.js"><link rel="prefetch" href="/assets/js/187.c911729d.js"><link rel="prefetch" href="/assets/js/188.beee8df1.js"><link rel="prefetch" href="/assets/js/189.b9dd5e49.js"><link rel="prefetch" href="/assets/js/19.11c855e5.js"><link rel="prefetch" href="/assets/js/190.7cc6b25d.js"><link rel="prefetch" href="/assets/js/191.b3318c6a.js"><link rel="prefetch" href="/assets/js/192.77584b2e.js"><link rel="prefetch" href="/assets/js/193.7c49a9b9.js"><link rel="prefetch" href="/assets/js/194.039bd6ae.js"><link rel="prefetch" href="/assets/js/195.249529a2.js"><link rel="prefetch" href="/assets/js/196.38d4c972.js"><link rel="prefetch" href="/assets/js/197.9cb4bd47.js"><link rel="prefetch" href="/assets/js/198.d91ec442.js"><link rel="prefetch" href="/assets/js/199.47598360.js"><link rel="prefetch" href="/assets/js/2.26d3c737.js"><link rel="prefetch" href="/assets/js/20.8f5af671.js"><link rel="prefetch" href="/assets/js/200.bf98f7e3.js"><link rel="prefetch" href="/assets/js/201.0c537e8a.js"><link rel="prefetch" href="/assets/js/202.74644899.js"><link rel="prefetch" href="/assets/js/203.aa697370.js"><link rel="prefetch" href="/assets/js/204.c1c09887.js"><link rel="prefetch" href="/assets/js/205.34c8ec05.js"><link rel="prefetch" href="/assets/js/206.6dc886f4.js"><link rel="prefetch" href="/assets/js/207.5e8d84b9.js"><link rel="prefetch" href="/assets/js/208.422a78c9.js"><link rel="prefetch" href="/assets/js/209.e668043f.js"><link rel="prefetch" href="/assets/js/21.a7934c2b.js"><link rel="prefetch" href="/assets/js/210.c6fae815.js"><link rel="prefetch" href="/assets/js/211.f38839c5.js"><link rel="prefetch" href="/assets/js/212.6c5a04fc.js"><link rel="prefetch" href="/assets/js/213.626d700e.js"><link rel="prefetch" href="/assets/js/214.44262fd6.js"><link rel="prefetch" href="/assets/js/215.bf166843.js"><link rel="prefetch" href="/assets/js/216.cfc1c958.js"><link rel="prefetch" href="/assets/js/217.84b00f6d.js"><link rel="prefetch" href="/assets/js/218.960ef07c.js"><link rel="prefetch" href="/assets/js/219.315a8eed.js"><link rel="prefetch" href="/assets/js/22.f5e7b054.js"><link rel="prefetch" href="/assets/js/220.a7854988.js"><link rel="prefetch" href="/assets/js/221.1db4e34e.js"><link rel="prefetch" href="/assets/js/222.4eeb50bc.js"><link rel="prefetch" href="/assets/js/223.c4e5b2a6.js"><link rel="prefetch" href="/assets/js/224.64c4cb9f.js"><link rel="prefetch" href="/assets/js/225.0ed4d31b.js"><link rel="prefetch" href="/assets/js/226.c324ae59.js"><link rel="prefetch" href="/assets/js/227.d2b1968d.js"><link rel="prefetch" href="/assets/js/228.489a5017.js"><link rel="prefetch" href="/assets/js/229.48e8e253.js"><link rel="prefetch" href="/assets/js/23.ce1fb220.js"><link rel="prefetch" href="/assets/js/230.b287444d.js"><link rel="prefetch" href="/assets/js/231.1572162d.js"><link rel="prefetch" href="/assets/js/232.c87c013a.js"><link rel="prefetch" href="/assets/js/233.08fe9ed2.js"><link rel="prefetch" href="/assets/js/234.d60497dd.js"><link rel="prefetch" href="/assets/js/235.46eea194.js"><link rel="prefetch" href="/assets/js/236.16dce2fa.js"><link rel="prefetch" href="/assets/js/237.c41331a1.js"><link rel="prefetch" href="/assets/js/238.ee2af549.js"><link rel="prefetch" href="/assets/js/239.192340ee.js"><link rel="prefetch" href="/assets/js/24.45a4d49b.js"><link rel="prefetch" href="/assets/js/240.689e21d0.js"><link rel="prefetch" href="/assets/js/241.c686b138.js"><link rel="prefetch" href="/assets/js/242.bf726d11.js"><link rel="prefetch" href="/assets/js/243.c97fb26e.js"><link rel="prefetch" href="/assets/js/244.0bc3aca2.js"><link rel="prefetch" href="/assets/js/245.e905477e.js"><link rel="prefetch" href="/assets/js/246.c03fd79c.js"><link rel="prefetch" href="/assets/js/247.79f63a32.js"><link rel="prefetch" href="/assets/js/248.41f306db.js"><link rel="prefetch" href="/assets/js/249.85317e41.js"><link rel="prefetch" href="/assets/js/25.b38390d6.js"><link rel="prefetch" href="/assets/js/250.dd05de70.js"><link rel="prefetch" href="/assets/js/251.958400c2.js"><link rel="prefetch" href="/assets/js/252.af20403b.js"><link rel="prefetch" href="/assets/js/253.ab0fc9f2.js"><link rel="prefetch" href="/assets/js/254.f97ef332.js"><link rel="prefetch" href="/assets/js/255.53c2195c.js"><link rel="prefetch" href="/assets/js/256.6cb185f7.js"><link rel="prefetch" href="/assets/js/257.2367b2f0.js"><link rel="prefetch" href="/assets/js/26.69d94a92.js"><link rel="prefetch" href="/assets/js/27.4b2b1653.js"><link rel="prefetch" href="/assets/js/28.cfdbf493.js"><link rel="prefetch" href="/assets/js/29.a96f9a10.js"><link rel="prefetch" href="/assets/js/3.8a12073d.js"><link rel="prefetch" href="/assets/js/30.801b0e22.js"><link rel="prefetch" href="/assets/js/31.c1096013.js"><link rel="prefetch" href="/assets/js/32.d7dc5c26.js"><link rel="prefetch" href="/assets/js/33.78f0a38f.js"><link rel="prefetch" href="/assets/js/34.db348180.js"><link rel="prefetch" href="/assets/js/35.6351de23.js"><link rel="prefetch" href="/assets/js/36.a7e83941.js"><link rel="prefetch" href="/assets/js/37.951e8f98.js"><link rel="prefetch" href="/assets/js/38.95b1157e.js"><link rel="prefetch" href="/assets/js/39.c2bbcdfa.js"><link rel="prefetch" href="/assets/js/4.5719f243.js"><link rel="prefetch" href="/assets/js/40.15f46507.js"><link rel="prefetch" href="/assets/js/41.77e9d575.js"><link rel="prefetch" href="/assets/js/42.4c87bde4.js"><link rel="prefetch" href="/assets/js/43.21c3e896.js"><link rel="prefetch" href="/assets/js/44.9e582158.js"><link rel="prefetch" href="/assets/js/45.86c1009c.js"><link rel="prefetch" href="/assets/js/46.92ba4916.js"><link rel="prefetch" href="/assets/js/47.37805f4f.js"><link rel="prefetch" href="/assets/js/48.982d64ad.js"><link rel="prefetch" href="/assets/js/49.2c1811ae.js"><link rel="prefetch" href="/assets/js/5.238e1904.js"><link rel="prefetch" href="/assets/js/50.901be8c6.js"><link rel="prefetch" href="/assets/js/51.8fa4ab9c.js"><link rel="prefetch" href="/assets/js/52.047a485a.js"><link rel="prefetch" href="/assets/js/53.270d8db1.js"><link rel="prefetch" href="/assets/js/54.7738ca06.js"><link rel="prefetch" href="/assets/js/55.a51efa86.js"><link rel="prefetch" href="/assets/js/56.1d74ec14.js"><link rel="prefetch" href="/assets/js/57.39ba697c.js"><link rel="prefetch" href="/assets/js/58.9034dc72.js"><link rel="prefetch" href="/assets/js/59.6f4cd2d9.js"><link rel="prefetch" href="/assets/js/60.a7aa7246.js"><link rel="prefetch" href="/assets/js/61.ddf69a10.js"><link rel="prefetch" href="/assets/js/62.506d2ae8.js"><link rel="prefetch" href="/assets/js/63.0d7ff181.js"><link rel="prefetch" href="/assets/js/64.d01c6c9d.js"><link rel="prefetch" href="/assets/js/65.91883f22.js"><link rel="prefetch" href="/assets/js/66.95978af8.js"><link rel="prefetch" href="/assets/js/67.90e360c4.js"><link rel="prefetch" href="/assets/js/68.71130ba2.js"><link rel="prefetch" href="/assets/js/69.c59de569.js"><link rel="prefetch" href="/assets/js/70.4a696a9d.js"><link rel="prefetch" href="/assets/js/71.7e455c8c.js"><link rel="prefetch" href="/assets/js/72.37a9e52b.js"><link rel="prefetch" href="/assets/js/73.ad72d3f7.js"><link rel="prefetch" href="/assets/js/74.e2ce415a.js"><link rel="prefetch" href="/assets/js/75.a2c56ded.js"><link rel="prefetch" href="/assets/js/76.7975fcd1.js"><link rel="prefetch" href="/assets/js/77.223ac240.js"><link rel="prefetch" href="/assets/js/78.7c24f8f8.js"><link rel="prefetch" href="/assets/js/79.43838770.js"><link rel="prefetch" href="/assets/js/8.d197c978.js"><link rel="prefetch" href="/assets/js/80.ccc8e6b1.js"><link rel="prefetch" href="/assets/js/81.3aef179b.js"><link rel="prefetch" href="/assets/js/82.e57fff3f.js"><link rel="prefetch" href="/assets/js/83.9a383ef3.js"><link rel="prefetch" href="/assets/js/84.7f4384e1.js"><link rel="prefetch" href="/assets/js/85.f207bb9e.js"><link rel="prefetch" href="/assets/js/86.9112af82.js"><link rel="prefetch" href="/assets/js/87.1e24764d.js"><link rel="prefetch" href="/assets/js/88.08b9ee9f.js"><link rel="prefetch" href="/assets/js/89.32427ef2.js"><link rel="prefetch" href="/assets/js/9.2e4e348a.js"><link rel="prefetch" href="/assets/js/90.4edf494c.js"><link rel="prefetch" href="/assets/js/91.437121c0.js"><link rel="prefetch" href="/assets/js/92.d7463e00.js"><link rel="prefetch" href="/assets/js/93.7f8abceb.js"><link rel="prefetch" href="/assets/js/94.dc99d133.js"><link rel="prefetch" href="/assets/js/95.adcee812.js"><link rel="prefetch" href="/assets/js/96.cc97a0e6.js"><link rel="prefetch" href="/assets/js/97.d60d6145.js"><link rel="prefetch" href="/assets/js/98.308f7e03.js"><link rel="prefetch" href="/assets/js/99.b98820ee.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2a74c09d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/newlogo.png" alt="厄索斯" class="logo"> <span class="site-name can-hide">厄索斯</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FrontEnd" class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="FrontEnd" class="mobile-dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interview/" class="nav-link">
  前端乱炖
</a></li><li class="dropdown-subitem"><a href="/ECMAScript/" class="nav-link">
  ECMAScript ES6-ES11
</a></li></ul></li><li class="dropdown-item"><h4>
          JavaScript书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/javascript/know-up.html" class="nav-link">
  你不知道的JavaScript(上)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/know-down.html" class="nav-link">
  你不知道的JavaScript(中下)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/algorithm.html" class="nav-link">
  JavaScript数据结构和算法
</a></li><li class="dropdown-subitem"><a href="/designPattern/" class="nav-link">
  JavaScript设计模式与开发实践
</a></li><li class="dropdown-subitem"><a href="/books/javascript/es6.html" class="nav-link">
  深入理解ES6
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BackEnd" class="dropdown-title"><span class="title">BackEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="BackEnd" class="mobile-dropdown-title"><span class="title">BackEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器安装部署
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/NginxInstall.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  🛠️ 阿里云部署Nginx(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Node.html" class="nav-link">
  🛠️ 阿里云部署Node&amp;pm2(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Mongodb.html" class="nav-link">
  🛠️ 阿里云部署Mongodb(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/RedisInstall.html" class="nav-link">
  🛠️ 阿里云部署Redis(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">
  🛠️ 阿里云部署Docker(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Https.html" class="nav-link">
  🛠️ Lets Encrypt生成https证书
</a></li></ul></li><li class="dropdown-item"><h4>
          后端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/node/koa.html" class="nav-link">
  📚 Koa2文档 
</a></li><li class="dropdown-subitem"><a href="/backend/Redisdocs.html" class="nav-link">
  📚 Redis文档
</a></li><li class="dropdown-subitem"><a href="/backend/Mysql.html" class="nav-link">
  📚 Mysql文档
</a></li><li class="dropdown-subitem"><a href="/backend/NginxDocs.html" class="nav-link">
  📚 Nginx文档
</a></li><li class="dropdown-subitem"><a href="/DockerDocs/" class="nav-link">
  📚 Docker文档
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TypeScript" class="dropdown-title"><span class="title">TypeScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="TypeScript" class="mobile-dropdown-title"><span class="title">TypeScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/typescript/base.html" class="nav-link">
  TypeScript基础
</a></li><li class="dropdown-item"><!----> <a href="/typescript/challenge.html" class="nav-link">
  TypeScript类型挑战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tutorial" class="dropdown-title"><span class="title">Tutorial</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tutorial" class="mobile-dropdown-title"><span class="title">Tutorial</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          常用工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/git/" class="nav-link">
  📚 Git
</a></li><li class="dropdown-subitem"><a href="/tutorial/google.html" class="nav-link">
  📚 授权登录
</a></li><li class="dropdown-subitem"><a href="/backend/More.html" class="nav-link">
  📚 More
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          外部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://ref.xmanv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 Quick Reference
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 Linux命令大全
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cli.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 Vue CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 React CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://www.xmanv.com/" target="_blank" rel="noopener noreferrer" class="repo-link">
    MyBlog
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FrontEnd" class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="FrontEnd" class="mobile-dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interview/" class="nav-link">
  前端乱炖
</a></li><li class="dropdown-subitem"><a href="/ECMAScript/" class="nav-link">
  ECMAScript ES6-ES11
</a></li></ul></li><li class="dropdown-item"><h4>
          JavaScript书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/javascript/know-up.html" class="nav-link">
  你不知道的JavaScript(上)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/know-down.html" class="nav-link">
  你不知道的JavaScript(中下)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/algorithm.html" class="nav-link">
  JavaScript数据结构和算法
</a></li><li class="dropdown-subitem"><a href="/designPattern/" class="nav-link">
  JavaScript设计模式与开发实践
</a></li><li class="dropdown-subitem"><a href="/books/javascript/es6.html" class="nav-link">
  深入理解ES6
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BackEnd" class="dropdown-title"><span class="title">BackEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="BackEnd" class="mobile-dropdown-title"><span class="title">BackEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器安装部署
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/NginxInstall.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  🛠️ 阿里云部署Nginx(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Node.html" class="nav-link">
  🛠️ 阿里云部署Node&amp;pm2(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Mongodb.html" class="nav-link">
  🛠️ 阿里云部署Mongodb(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/RedisInstall.html" class="nav-link">
  🛠️ 阿里云部署Redis(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">
  🛠️ 阿里云部署Docker(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Https.html" class="nav-link">
  🛠️ Lets Encrypt生成https证书
</a></li></ul></li><li class="dropdown-item"><h4>
          后端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/node/koa.html" class="nav-link">
  📚 Koa2文档 
</a></li><li class="dropdown-subitem"><a href="/backend/Redisdocs.html" class="nav-link">
  📚 Redis文档
</a></li><li class="dropdown-subitem"><a href="/backend/Mysql.html" class="nav-link">
  📚 Mysql文档
</a></li><li class="dropdown-subitem"><a href="/backend/NginxDocs.html" class="nav-link">
  📚 Nginx文档
</a></li><li class="dropdown-subitem"><a href="/DockerDocs/" class="nav-link">
  📚 Docker文档
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TypeScript" class="dropdown-title"><span class="title">TypeScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="TypeScript" class="mobile-dropdown-title"><span class="title">TypeScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/typescript/base.html" class="nav-link">
  TypeScript基础
</a></li><li class="dropdown-item"><!----> <a href="/typescript/challenge.html" class="nav-link">
  TypeScript类型挑战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tutorial" class="dropdown-title"><span class="title">Tutorial</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tutorial" class="mobile-dropdown-title"><span class="title">Tutorial</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          常用工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/git/" class="nav-link">
  📚 Git
</a></li><li class="dropdown-subitem"><a href="/tutorial/google.html" class="nav-link">
  📚 授权登录
</a></li><li class="dropdown-subitem"><a href="/backend/More.html" class="nav-link">
  📚 More
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          外部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://ref.xmanv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 Quick Reference
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 Linux命令大全
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cli.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 Vue CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 React CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://www.xmanv.com/" target="_blank" rel="noopener noreferrer" class="repo-link">
    MyBlog
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/NginxInstall.html#准备环境及安装" class="sidebar-link">准备环境及安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/NginxInstall.html#阿里云centos安装nginx所需环境" class="sidebar-link">阿里云CentOS安装Nginx所需环境</a></li><li class="sidebar-sub-header"><a href="/backend/NginxInstall.html#阿里云centos开始安装nignx" class="sidebar-link">阿里云CentOS开始安装Nignx</a></li><li class="sidebar-sub-header"><a href="/backend/NginxInstall.html#window如何安装nginx" class="sidebar-link">Window如何安装Nginx</a></li></ul></li><li><a href="/backend/NginxInstall.html#http及https的有关配置" class="sidebar-link">Http及Https的有关配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/backend/NginxInstall.html#nginx配置301重定向" class="sidebar-link">Nginx配置301重定向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/NginxInstall.html#http-重定向到-https" class="sidebar-link">http 重定向到 https</a></li><li class="sidebar-sub-header"><a href="/backend/NginxInstall.html#主域名重定向到-www-域名" class="sidebar-link">主域名重定向到 www 域名</a></li><li class="sidebar-sub-header"><a href="/backend/NginxInstall.html#将-主域名或-http-域名-都重定向到-https-的-www-域名" class="sidebar-link">将&quot;主域名或 http 域名&quot;都重定向到 https 的 www 域名</a></li></ul></li><li><a href="/backend/NginxInstall.html#nginx配置gzip压缩" class="sidebar-link">Nginx配置gzip压缩</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/backend/NginxInstall.html#nginx封禁ip或ip段" class="sidebar-link">nginx封禁IP或IP段</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/backend/NginxInstall.html#开启ocspstapling优化https访问性能" class="sidebar-link">开启OCSPStapling优化https访问性能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/NginxInstall.html#检查证书是否已开启-ocsp-stapling" class="sidebar-link">检查证书是否已开启 OCSP Stapling</a></li><li class="sidebar-sub-header"><a href="/backend/NginxInstall.html#开启-nginx-的-ocsp-stapling-配置" class="sidebar-link">开启 nginx 的 OCSP Stapling 配置</a></li></ul></li><li><a href="/backend/NginxInstall.html#负载均衡" class="sidebar-link">负载均衡</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/backend/NginxInstall.html#修改阿里云组策略" class="sidebar-link">修改阿里云组策略</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="阿里云-云服务器-ecs-centos7-0安装nginx教程"><a href="#阿里云-云服务器-ecs-centos7-0安装nginx教程" class="header-anchor">#</a> 阿里云 云服务器 ECS CentOS7.0安装Nginx教程</h1> <p><a href="http://nginx.org/" target="_blank" rel="noopener noreferrer">Nginx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个高性能的HTTP和反向代理服务，许多的大型网站都会采用Nginx来进行HTTP服务器托管，当然我们这里也要采用Nginx，在安装Nginx之前，需要安装一些前置模块</p> <h2 id="准备环境及安装"><a href="#准备环境及安装" class="header-anchor">#</a> 准备环境及安装</h2> <div class="custom-block tip"><p class="custom-block-title">关于Linux拓展补充</p> <p>/opt：是用户级的程序目录，可以理解为D:/Software。安装到/opt目录下的程序，它所有的数据、库文件等等都是放在同个目录下面。opt有可选的意思，这里可以用于放置第三方大型软件（或游戏），当你不需要时，直接rm -rf掉即可。在硬盘容量不够时，也可将/opt单独挂载到其他磁盘上使用。 <br>
/usr：系统级的目录，可以理解为C:/Windows/。<br>
/usr/lib：理解为C:/Windows/System32。<br>
/usr/local：用户级的程序目录，可以理解为C:/Progrem Files/。用户自己编译的软件默认会安装到这个目录下。<br>
这里主要存放那些手动安装的软件，即不是通过“新立得”或apt-get安装的软件。它和/usr目录具有相类似的目录结构。让软件包管理器来管理/usr目录，而把自定义的脚本(scripts)放到/usr/local目录下面。<br></p></div> <h3 id="阿里云centos安装nginx所需环境"><a href="#阿里云centos安装nginx所需环境" class="header-anchor">#</a> 阿里云CentOS安装Nginx所需环境</h3> <h5 id="安装编译环境gcc-g"><a href="#安装编译环境gcc-g" class="header-anchor">#</a> 安装编译环境gcc g++</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入到root目录</span>
<span class="token builtin class-name">cd</span> /root/
yum -y <span class="token function">install</span> <span class="token function">make</span> zlib zlib-devel gcc-c++ libtool  openssl openssl-devel
</code></pre></div><h5 id="安装pcre-pcre功能是让nginx有rewrite功能-下载pcre"><a href="#安装pcre-pcre功能是让nginx有rewrite功能-下载pcre" class="header-anchor">#</a> 安装PCRE: PCRE功能是让nginx有rewrite功能，下载PCRE</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">wget</span> http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz
</code></pre></div><h5 id="解压pcre安装包"><a href="#解压pcre安装包" class="header-anchor">#</a> 解压PCRE安装包</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">tar</span> zxvf pcre-8.35.tar.gz
</code></pre></div><h5 id="安装pcre"><a href="#安装pcre" class="header-anchor">#</a> 安装PCRE</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入安装包目录</span>
<span class="token builtin class-name">cd</span> pcre-8.35 

<span class="token comment"># 编译      </span>
./configure 

<span class="token comment"># 安装     </span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><br> <br> <h3 id="阿里云centos开始安装nignx"><a href="#阿里云centos开始安装nignx" class="header-anchor">#</a> 阿里云CentOS开始安装Nignx</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 回到root目录：</span>
<span class="token builtin class-name">cd</span> /root/

<span class="token comment"># 载nginx安装包</span>
<span class="token function">wget</span> http://nginx.org/download/nginx-1.16.0.tar.gz
</code></pre></div><h5 id="解压安装包"><a href="#解压安装包" class="header-anchor">#</a> 解压安装包</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">tar</span> zxvf nginx-1.16.0.tar.gz
</code></pre></div><blockquote><p>注意，这里要选好当前解压地址，解压完成就是Nginx所在的目录，这里我们在root根目录下解压。 进入安装目录：</p></blockquote> <h5 id="编译-安装"><a href="#编译-安装" class="header-anchor">#</a> 编译 安装</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入nginx-1.16.0.tar.gz 解压后的文件 nginx-1.16.0</span>
<span class="token builtin class-name">cd</span> nginx-1.16.0

<span class="token comment"># 编译</span>
./configure  --prefix<span class="token operator">=</span>/usr/local/nginx/ --with-http_stub_status_module  --with-http_ssl_module

<span class="token comment"># 安装</span>
 <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><blockquote><p><code>编译时不写入 --prefix=/usr/local/nginx 则意味着Nginx会安装到/usr/local/nginx下面 |||| 你可以指定到安装到/root目录下./configure --prefix=/root/nginx</code></p></blockquote> <details class="custom-block details"><summary>已安装NGINX  首次安装编译Nginx时如果没有添加 --with-http_ssl_module  意味着不能使用https   如何不重新装NGINX操作如下</summary> <p><strong>环境：已安装NGINX</strong>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入到解压后的nginx安装文件下内</span>
<span class="token builtin class-name">cd</span>  /root/nginx-1.16.0

<span class="token comment"># 重新编译 </span>
./configure  --with-http_stub_status_module --with-http_ssl_module

<span class="token comment"># 安装  切记不要 make install 否则会导致覆盖之前的nginx</span>
<span class="token function">make</span>

<span class="token comment">#备份</span>
<span class="token function">cp</span> /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak

<span class="token comment"># 拷贝 (make完之后在objs目录下就多了个nginx，这个就是新版本的程序了)</span>
<span class="token function">cp</span> -r objs/nginx /usr/local/nginx/sbin/nginx

<span class="token comment"># 重启</span>
/usr/local/nginx/sbin/nginx -s reload
</code></pre></div></details> <h5 id="启动和停止nginx"><a href="#启动和停止nginx" class="header-anchor">#</a> 启动和停止Nginx</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s stop

<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s reload
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">首次开启Nginx 报错 /usr/local/Nginx/logs/Nginx.pid&quot; failed(2:No such file or directory)</p> <p><strong>/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</strong> <br> <code>使用nginx -c的参数指定nginx.conf文件的位置</code></p></div> <div class="custom-block warning"><p class="custom-block-title">如果在修改Nginx参数后 运行时报错 (Found a swap file by the name &quot;.nginx.conf.swp&quot;)</p> <blockquote><p>那就是因为上次vim的时候，没有完全退出中途产生中断了。解决问题的方式很简单，就是把这个后缀swp的文件删掉就可以了**** <br></p></blockquote> <p><code>cd /usr/local/nginx/sbin/nginx</code></p> <p>命令显示出所有文件  (因为 .swp 暂存文件是隐藏文件) <br> <code>ls -a</code></p> <p>执行删除<br> <code>rm -f .nginx.conf.swp</code></p> <p>然后重启服务<br> <code>/usr/local/nginx/sbin/nginx -s reload</code></p></div> <div class="custom-block tip"><p class="custom-block-title">常用Nginx指令</p> <p><code>重新载入配置文件</code>              /usr/local/nginx/sbin/nginx -s reload   <br> <code>重启 Nginx</code>                 /usr/local/nginx/sbin/nginx -s reopen   <br> <code>停止 Nginx</code>                 /usr/local/nginx/sbin/nginx -s stop    <br> <code>查看ngixn版本极其编译参数</code>   /usr/local/nginx/sbin/nginx -V   <br> <code>检查配置文件nginx.conf的正确性命令</code> /usr/local/nginx/sbin/nginx -t</p></div> <br> <br> <h3 id="window如何安装nginx"><a href="#window如何安装nginx" class="header-anchor">#</a> Window如何安装Nginx</h3> <ul><li>到<code>nginx</code>官网下载<code>window</code>版压缩包（作者使用的是<code>nginx-1.14.2</code>）</li></ul> <blockquote><p>http://nginx.org/en/download.html</p></blockquote> <ul><li><p>在任意位置解压<code>nginx</code>压缩包</p></li> <li><p>进入<code>nginx</code>根目录，并在<code>html</code>目录下新建一个文件夹<code>admin</code>文件夹</p></li> <li><p>回到<code>nginx</code>根目录，并进入到<code>conf</code>目录下，找到<code>nginx.conf</code>并打开</p></li> <li><p>找到<code>http</code>域并另起一行，加入如下代码：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>sever <span class="token punctuation">{</span>
  listen <span class="token number">80</span><span class="token punctuation">;</span>
  server_name xxx<span class="token punctuation">.</span>com<span class="token punctuation">;</span>#<span class="token punctuation">(</span>您的域名<span class="token punctuation">)</span>
  location <span class="token operator">/</span> <span class="token punctuation">{</span>
    root html<span class="token operator">/</span>admin<span class="token punctuation">;</span>
		try_files $uri $uri<span class="token operator">/</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
		index index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>回到<code>nginx</code>根目录，双击<code>nginx.exe</code>运行<code>nginx</code></li></ul> <br> <br> <h2 id="http及https的有关配置"><a href="#http及https的有关配置" class="header-anchor">#</a> Http及Https的有关配置</h2> <h4 id="访问本机文件夹的nginx的配置"><a href="#访问本机文件夹的nginx的配置" class="header-anchor">#</a> 访问本机文件夹的Nginx的配置</h4> <p>通过Nginx配置实现根据不同的客户端访问不同的文件比如H5和PC 并且支持vue静态页面的<code>history路由模式</code></p> <blockquote><p>通过自定义变量实现访问不同的文件夹资源 <code>$terminaltype</code>  &amp;  <code>root $terminaltype</code> <br>
通过配置 <code>try_files</code>  可以实现vue静态文件支持history路由模式访问</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 访问文件的配置</span>
server <span class="token punctuation">{</span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>
        server_name  www.xmanv.com<span class="token punctuation">;</span>
        <span class="token builtin class-name">set</span> <span class="token variable">$terminaltype</span> html/web-client/pc<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$http_user_agent</span> ~ <span class="token punctuation">(</span>Android<span class="token operator">|</span>iPhone<span class="token operator">|</span>iPod<span class="token operator">|</span>BlackBerry<span class="token operator">|</span>WindowsPhone<span class="token operator">|</span>UC<span class="token operator">|</span>Kindle<span class="token operator">|</span>Mobile<span class="token operator">|</span>webOS<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin class-name">set</span> <span class="token variable">$terminaltype</span> html/web-client/wap<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location / <span class="token punctuation">{</span>
            add_header Access-Control-Allow-Origin  *<span class="token punctuation">;</span>
            add_header Access-Control-Allow-Credentials  <span class="token boolean">true</span><span class="token punctuation">;</span>
            add_header Access-Control-Allow-Methods  *<span class="token punctuation">;</span>
            root <span class="token variable">$terminaltype</span><span class="token punctuation">;</span>
            index index.html index.htm index.php<span class="token punctuation">;</span>
            try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>try_files</code>按配置顺序检查文件是否存在，返回第一个找到的文件。结尾的斜线表示为文件夹 -$uri/。如果所有的文件都找不到，会进行一个内部重定向到最后一个参数。</p></div> <h4 id="代理本机其他接口的配置"><a href="#代理本机其他接口的配置" class="header-anchor">#</a> 代理本机其他接口的配置</h4> <blockquote><p>通过配置  <code>proxy_pass</code>  实现接口的反向代理</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 代理本机其他接口的配置</span>
    server <span class="token punctuation">{</span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>
        server_name  api.xmanv.com<span class="token punctuation">;</span>
        location ~ /^<span class="token punctuation">[</span>H,h<span class="token punctuation">]</span><span class="token punctuation">[</span>T,t<span class="token punctuation">]</span><span class="token punctuation">[</span>T,t<span class="token punctuation">]</span><span class="token punctuation">[</span>P,p<span class="token punctuation">]</span><span class="token punctuation">[</span>S,s<span class="token punctuation">]</span>/ <span class="token punctuation">{</span>
            proxy_pass http://127.0.0.1:5614<span class="token punctuation">;</span>
            proxy_set_header Host                           <span class="token variable">$http_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Real-IP                      <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Forwarded-For                <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
            index index.html index.htm<span class="token punctuation">;</span>                     <span class="token comment">#默认情况</span>
        <span class="token punctuation">}</span>
        location / <span class="token punctuation">{</span>
            proxy_pass http://127.0.0.1:5614<span class="token punctuation">;</span>
            proxy_set_header Host                           <span class="token variable">$http_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Real-IP                      <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Forwarded-For                <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
            index index.html index.htm<span class="token punctuation">;</span>                     <span class="token comment">#默认情况</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="配置https支持网站https访问-同时强制用户访问http是跳到https"><a href="#配置https支持网站https访问-同时强制用户访问http是跳到https" class="header-anchor">#</a> 配置Https支持网站https访问 同时强制用户访问http是跳到https</h4> <blockquote><p>通过配置  <code>rewrite ^(.*) https://$server_name$1 permanent;</code>  实现重定向 <a href="https://www.cnblogs.com/redfire/p/7695627.html" target="_blank" rel="noopener noreferrer">其他方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 代理本机其他接口的配置</span>
server <span class="token punctuation">{</span>
    listen      <span class="token number">443</span> ssl<span class="token punctuation">;</span>
    server_name  www.xmanv.com<span class="token punctuation">;</span>
    <span class="token builtin class-name">set</span> <span class="token variable">$terminaltype</span> html/web-client/pc<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$http_user_agent</span> ~ <span class="token punctuation">(</span>Android<span class="token operator">|</span>iPhone<span class="token operator">|</span>iPod<span class="token operator">|</span>BlackBerry<span class="token operator">|</span>WindowsPhone<span class="token operator">|</span>UC<span class="token operator">|</span>Kindle<span class="token operator">|</span>Mobile<span class="token operator">|</span>webOS<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">set</span> <span class="token variable">$terminaltype</span> html/web-client/wap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    add_header Access-Control-Allow-Credentials  <span class="token boolean">true</span><span class="token punctuation">;</span>
    add_header Access-Control-Allow-Methods  *<span class="token punctuation">;</span>
    root <span class="token variable">$terminaltype</span><span class="token punctuation">;</span>
    index index.html index.htm index.php<span class="token punctuation">;</span>
    try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ssl_certificate      /root/.acme.sh/xmanv.com/fullchain.cer<span class="token punctuation">;</span> <span class="token comment">#证书地址</span>
    ssl_certificate_key  /root/.acme.sh/xmanv.com/xmanv.com.key<span class="token punctuation">;</span> <span class="token comment">#秘钥地址</span>
    ssl_session_cache    shared:SSL:1m<span class="token punctuation">;</span> 
    ssl_stapling_verify on<span class="token punctuation">;</span>
    resolver <span class="token number">8.8</span>.8.8 <span class="token number">8.8</span>.4.4 <span class="token assign-left variable">valid</span><span class="token operator">=</span>60s <span class="token assign-left variable">ipv6</span><span class="token operator">=</span>off<span class="token punctuation">;</span>
    resolver_timeout 5s<span class="token punctuation">;</span>
    error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
    location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root   html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
server <span class="token punctuation">{</span>
    server_name  www.xmanv.com<span class="token punctuation">;</span>
    rewrite ^<span class="token punctuation">(</span>.*<span class="token punctuation">)</span> https://<span class="token variable">$server_name</span><span class="token variable">$1</span> permanent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><a href="/backend/https.html#安装acme-sh脚本">免费Https证书获取教程</a></p></div> <h2 id="nginx配置301重定向"><a href="#nginx配置301重定向" class="header-anchor">#</a> Nginx配置301重定向</h2> <blockquote><p>本文讲解 nginx 如何配置重定向跳转。重定向分为 301 永久重定向和 302 临时重定向，本文主要讲解 301 永久重定向。<br>
网站在实际运营中，很可能会有重定向的需求, 如非 www 域名自动重定向为 www 域名, http 地址自动重定向为 https 地址等。<br>
当网站的域名做变更时，通过 301 重定向还可以将旧域名的分数排名转移到新域名。<br></p></blockquote> <h3 id="http-重定向到-https"><a href="#http-重定向到-https" class="header-anchor">#</a> http 重定向到 https</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 将&quot;http的www域名&quot;重定向到&quot;https的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://www.sofineday.com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 配置https的www域名</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#https端口</span>
    listen       <span class="token number">443</span> ssl<span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token comment">#https的证书配置</span>
    ssl_certificate    /etc/nginx/cert/_.sofineday.com.full_chain.pem<span class="token punctuation">;</span>
    ssl_certificate_key    /etc/nginx/cert/_.sofineday.com.private.key<span class="token punctuation">;</span>

    root /static-file/blog<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="主域名重定向到-www-域名"><a href="#主域名重定向到-www-域名" class="header-anchor">#</a> 主域名重定向到 www 域名</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 将&quot;http的主域名&quot;重定向到&quot;http的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>

    server_name  sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token builtin class-name">return</span> <span class="token number">301</span> http://www.sofineday.com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 将&quot;http的www域名&quot;重定向到&quot;https的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    root /static-file/blog<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="将-主域名或-http-域名-都重定向到-https-的-www-域名"><a href="#将-主域名或-http-域名-都重定向到-https-的-www-域名" class="header-anchor">#</a> 将&quot;主域名或 http 域名&quot;都重定向到 https 的 www 域名</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>推荐该方案，终极方案，考虑得最完善！ 做 seo 优化时，需要考虑该方案，详见seo 重定向</p></div> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 将&quot;http或https的主域名&quot;重定向到&quot;https的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token comment">#https端口</span>
    listen       <span class="token number">443</span> ssl<span class="token punctuation">;</span>

    server_name  sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token comment">#https的证书配置</span>
    ssl_certificate    /etc/nginx/cert/_.sofineday.com.full_chain.pem<span class="token punctuation">;</span>
    ssl_certificate_key    /etc/nginx/cert/_.sofineday.com.private.key<span class="token punctuation">;</span>

    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://www.sofineday.com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 将&quot;http的www域名&quot;重定向到&quot;https的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://www.sofineday.com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 配置https的www域名</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#https端口</span>
    listen       <span class="token number">443</span> ssl<span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token comment">#https的证书配置</span>
    ssl_certificate    /etc/nginx/cert/_.sofineday.com.full_chain.pem<span class="token punctuation">;</span>
    ssl_certificate_key    /etc/nginx/cert/_.sofineday.com.private.key<span class="token punctuation">;</span>


    root /static-file/blog<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <br> <h2 id="nginx配置gzip压缩"><a href="#nginx配置gzip压缩" class="header-anchor">#</a> Nginx配置gzip压缩</h2> <br> <blockquote><p>本文讲述 nginx 支持 gzip 压缩的配置方法。大文件的访问不仅会浪费服务端的带宽流量，也会浪费用户端的带宽流量，并且还会影响传输速度，从而影响用户体验。<br>
所以对于大文件，应该采用 gzip 压缩，减少文件传输大小、减少带宽占用、提高文件加载速度、提升用户体验。</p></blockquote> <ul><li>打开<code>nginx.conf</code>，并在<code>http</code>模块任意行加入如下代码： 在 <code>http</code>,<code>server</code> 或 <code>location</code> 任意模块都可以配置 <code>gzip</code> 压缩。</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">gzip</span>  on<span class="token punctuation">;</span>
<span class="token comment">#gizp压缩起点，文件大于1k才进行压缩</span>
gzip_min_length 1k<span class="token punctuation">;</span>
<span class="token comment"># gzip 压缩级别，1-9，数字越大压缩的越好，也越占用CPU时间</span>
gzip_comp_level <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token comment"># 进行压缩的文件类型, 按需补充即可</span>
gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript<span class="token punctuation">;</span>
<span class="token comment"># 是否在http header中添加Vary: Accept-Encoding，建议开启</span>
gzip_vary on<span class="token punctuation">;</span>

</code></pre></div><ul><li>保存并重启<code>nginx</code></li></ul> <p><code>window</code>与<code>linux</code>的配置方式完全一致，只需要找到<code>nginx.conf</code>配置文件进行如上操作即可</p> <h2 id="nginx封禁ip或ip段"><a href="#nginx封禁ip或ip段" class="header-anchor">#</a> nginx封禁IP或IP段</h2> <blockquote><p>本文讲述 nginx 封禁 IP 或 IP 段的配置方法。若发现我们的网站被某个 IP 频繁非正常访问或被某个 IP 段频繁访问, 那么很可能是爬虫的 IP，我们需要根据实际分析来决定是否要封禁这些 IP，这样这些 IP 就无法访问我们的网站进而无法爬取我们的资源。</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>使用 deny 指令封禁 IP, 可以在如下区域配置:<br>
http、server 或 location</p></div> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">#封禁单个 IP</span>
deny <span class="token number">123.45</span>.6.7

<span class="token comment">#封整个段即从 123.0.0.1 到 123.255.255.254</span>
deny <span class="token number">123.0</span>.0.0/8

<span class="token comment">#封 IP 段即从 123.45.0.1 到 123.45.255.254 的命令</span>
deny <span class="token number">124.45</span>.0.0/16

<span class="token comment">#封 IP 段即从 123.45.6.1 到 123.45.6.254</span>
deny <span class="token number">123.45</span>.6.0/24
</code></pre></div><br> <br> <h2 id="开启ocspstapling优化https访问性能"><a href="#开启ocspstapling优化https访问性能" class="header-anchor">#</a> 开启OCSPStapling优化https访问性能</h2> <blockquote><p>本文讲述 nginx 开启 OCSP Stapling 的配置方法, 从而优化 https 的访问性能。因为免费证书的证书校验服务器可能没有国内节点，导致国内用户通过 https 访问站点可能会明显比 http 慢。nginx 开启 OCSP Stapling 即可解决该问题。</p></blockquote> <div class="custom-block warning"><p class="custom-block-title">https 站点访问慢的原因分析</p> <p>因为浏览器访问 https 站点时，至少首次访问会去证书校验服务器检验 https 证书, 但是免费证书的校验服务器一般都在国外，导致国内用户访问的时候，会明显感到慢，甚至经常出现网络错误。</p> <p>不同的客户端设备的 https 证书校验机制又不尽相同。例如 android 设备会在首次访问 https 站点时，把证书缓存在本地，后续访问就不会去访问校验服务，导致 android 上访问很流畅，但是 ios 设备却体验特别差，甚至压根没法用。</p> <p>为了解决免费 https 证书访问慢的问题，有个解决方案：<code>OCSP Stapling</code>。</p></div> <h3 id="检查证书是否已开启-ocsp-stapling"><a href="#检查证书是否已开启-ocsp-stapling" class="header-anchor">#</a> 检查证书是否已开启 OCSP Stapling</h3> <ul><li>检查证书是否已开启 OCSP Stapling</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>openssl s_client -connect sofineday.com:443 -servername sofineday.com -status -tlsextdebug <span class="token operator">&lt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;OCSP&quot;</span>
</code></pre></div><ul><li>若显示如下结果，则表示已开启</li></ul> <div class="language- extra-class"><pre class="language-text"><code>OCSP response:
OCSP Response Data:
    OCSP Response Status: successful (0x0)
    Response Type: Basic OCSP Response

</code></pre></div><ul><li>若显示如下结果，则表示未开启</li></ul> <div class="language- extra-class"><pre class="language-text"><code>OCSP response: no response sent
</code></pre></div><ul><li>前往 <a href="https://myssl.com/" target="_blank" rel="noopener noreferrer">myssl.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 网站 查看</li></ul> <p><img src="/assets/img/1.5ea43d8d.png" alt="开启后台启动"></p> <ul><li><p>若没有开启 ocsp, 显示如下 <br> <img src="/assets/img/2.57722a63.png" alt="开启后台启动"></p></li> <li><p>若已开启 ocsp，显示如下 <br> <img src="/assets/img/2.57722a63.png" alt="开启后台启动"></p></li></ul> <h3 id="开启-nginx-的-ocsp-stapling-配置"><a href="#开启-nginx-的-ocsp-stapling-配置" class="header-anchor">#</a> 开启 nginx 的 OCSP Stapling 配置</h3> <div class="custom-block tip"><p class="custom-block-title">此处只给了 Let's Encrypt 证书的 oscp 配置</p> <p>若您使用的是其它品牌的证书，配置方法不同，请自行查找教程。</p></div> <blockquote><p>在原有的 https 配置基础之上，加入如下 4 行配置即可</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code>ssl_stapling on<span class="token punctuation">;</span>
ssl_stapling_verify on<span class="token punctuation">;</span>
resolver <span class="token number">8.8</span>.8.8 <span class="token number">8.8</span>.4.4 <span class="token assign-left variable">valid</span><span class="token operator">=</span>60s <span class="token assign-left variable">ipv6</span><span class="token operator">=</span>off<span class="token punctuation">;</span>
resolver_timeout 5s<span class="token punctuation">;</span>
</code></pre></div><h2 id="负载均衡"><a href="#负载均衡" class="header-anchor">#</a> 负载均衡</h2> <blockquote><p>有效处理服务器高并发，同时也适用于平滑部署</p></blockquote> <ul><li>打开<code>nginx.conf</code>，并在<code>http</code>模块任意行加入如下代码：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>upstream xuanzai {
	server xxx.com weight=10; # 服务器1
	server xxx.com weight=10; # 服务器2
}
</code></pre></div><ul><li>配置<code>server</code>模块</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>server<span class="token punctuation">{</span>
	listen <span class="token number">80</span><span class="token punctuation">;</span>
	server_name xzadmin<span class="token punctuation">.</span>xuanzai<span class="token punctuation">.</span>top<span class="token punctuation">;</span> # 暴露给用户访问的域名
	location <span class="token operator">/</span> <span class="token punctuation">{</span>
		proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>xuanzai<span class="token punctuation">;</span> # 名称与负载均衡配置的名称一致
		proxy_redirect <span class="token keyword">default</span><span class="token punctuation">;</span>
		index index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>	
		root html<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>	
<span class="token punctuation">}</span>
</code></pre></div><ul><li>保存并重启<code>nginx</code></li></ul> <p>这样，简单的负载均衡就配置完成了！<br>
此时如果两个（或多个）服务器已开启，那么可尝试访问已配置好的域名，查看是否配置成功<br> <code>window</code>与<code>linux</code>的配置方式完全一致，只需要找到<code>nginx.conf</code>配置文件进行如上操作即可</p> <br> <h2 id="修改阿里云组策略"><a href="#修改阿里云组策略" class="header-anchor">#</a> 修改阿里云组策略</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>注意，在开启nginx的http和https服务后，需要在阿里云的云服务器实例安全组策略中添加80端口和443端口的开启。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果要使用其他端口都需要在安全组里进行配置(一个阿里云账号下的多台esc服务器 都是配在同一个地方)</p></div> <p><strong>找到实例中的安全组配置：</strong> <br> <img src="/assets/img/step1.93e6df80.jpg" alt="vuepress首页效果"></p> <p><strong>进入之后，点击添加安全组配置：</strong> <br> <img src="/assets/img/step2.b506cd4c.jpg" alt="vuepress首页效果"></p> <p><strong>添加http的80端口：</strong> <br> <img src="/assets/img/step3.176fefcc.jpg" alt="vuepress首页效果"></p> <p><strong>添加https的443端口：</strong> <br> <img src="/assets/img/step4.991b62ea.jpg" alt="vuepress首页效果"></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><APlayer audio="" fixed="true" autoplay="autoplay" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/assets/js/app.79e3517d.js" defer></script><script src="/assets/js/7.dfd2726a.js" defer></script><script src="/assets/js/18.5a6cf3fc.js" defer></script>
  </body>
</html>
