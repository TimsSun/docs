<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>propså¤„ç† | å„ç´¢æ–¯</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/icon.png">
    <meta name="description" content="å„ç´¢æ–¯">
    
    <link rel="preload" href="/assets/css/0.styles.2a74c09d.css" as="style"><link rel="preload" href="/assets/js/app.79e3517d.js" as="script"><link rel="preload" href="/assets/js/7.dfd2726a.js" as="script"><link rel="preload" href="/assets/js/52.047a485a.js" as="script"><link rel="prefetch" href="/assets/js/1.051e21bd.js"><link rel="prefetch" href="/assets/js/10.5bd8d79c.js"><link rel="prefetch" href="/assets/js/100.46cb0b11.js"><link rel="prefetch" href="/assets/js/101.5634400b.js"><link rel="prefetch" href="/assets/js/102.4a9f18fc.js"><link rel="prefetch" href="/assets/js/103.55fe04cb.js"><link rel="prefetch" href="/assets/js/104.c9480d00.js"><link rel="prefetch" href="/assets/js/105.4a6f489e.js"><link rel="prefetch" href="/assets/js/106.b4c616bc.js"><link rel="prefetch" href="/assets/js/107.e9a1ac6f.js"><link rel="prefetch" href="/assets/js/108.bd09dea1.js"><link rel="prefetch" href="/assets/js/109.0437876e.js"><link rel="prefetch" href="/assets/js/11.5dcfe499.js"><link rel="prefetch" href="/assets/js/110.ad3e004b.js"><link rel="prefetch" href="/assets/js/111.0dc0f626.js"><link rel="prefetch" href="/assets/js/112.7552b929.js"><link rel="prefetch" href="/assets/js/113.e1614162.js"><link rel="prefetch" href="/assets/js/114.023a8c44.js"><link rel="prefetch" href="/assets/js/115.03a143a4.js"><link rel="prefetch" href="/assets/js/116.b5615171.js"><link rel="prefetch" href="/assets/js/117.d737b084.js"><link rel="prefetch" href="/assets/js/118.67ae323e.js"><link rel="prefetch" href="/assets/js/119.07626328.js"><link rel="prefetch" href="/assets/js/12.28d43d06.js"><link rel="prefetch" href="/assets/js/120.183f3d5c.js"><link rel="prefetch" href="/assets/js/121.1d4a8cbc.js"><link rel="prefetch" href="/assets/js/122.546b1f81.js"><link rel="prefetch" href="/assets/js/123.c100453d.js"><link rel="prefetch" href="/assets/js/124.0d5bff4a.js"><link rel="prefetch" href="/assets/js/125.ae3b2813.js"><link rel="prefetch" href="/assets/js/126.58854f41.js"><link rel="prefetch" href="/assets/js/127.c5fd54a6.js"><link rel="prefetch" href="/assets/js/128.8e7e317e.js"><link rel="prefetch" href="/assets/js/129.69bbbb1a.js"><link rel="prefetch" href="/assets/js/13.48da9a7e.js"><link rel="prefetch" href="/assets/js/130.79d03516.js"><link rel="prefetch" href="/assets/js/131.f8e8bb11.js"><link rel="prefetch" href="/assets/js/132.16796cfa.js"><link rel="prefetch" href="/assets/js/133.1762f502.js"><link rel="prefetch" href="/assets/js/134.2c75e6d1.js"><link rel="prefetch" href="/assets/js/135.ce60109a.js"><link rel="prefetch" href="/assets/js/136.136627ba.js"><link rel="prefetch" href="/assets/js/137.aad32e53.js"><link rel="prefetch" href="/assets/js/138.f2a1698c.js"><link rel="prefetch" href="/assets/js/139.ec32b4a5.js"><link rel="prefetch" href="/assets/js/14.6b65eb55.js"><link rel="prefetch" href="/assets/js/140.77bb7d0b.js"><link rel="prefetch" href="/assets/js/141.e4916cd7.js"><link rel="prefetch" href="/assets/js/142.5c933e26.js"><link rel="prefetch" href="/assets/js/143.cbae16e7.js"><link rel="prefetch" href="/assets/js/144.7ce5398c.js"><link rel="prefetch" href="/assets/js/145.39bc149a.js"><link rel="prefetch" href="/assets/js/146.00679b7f.js"><link rel="prefetch" href="/assets/js/147.ba941640.js"><link rel="prefetch" href="/assets/js/148.0dc64e74.js"><link rel="prefetch" href="/assets/js/149.e35ab41d.js"><link rel="prefetch" href="/assets/js/15.9e751693.js"><link rel="prefetch" href="/assets/js/150.d56d227c.js"><link rel="prefetch" href="/assets/js/151.b0a31d2e.js"><link rel="prefetch" href="/assets/js/152.53496e3d.js"><link rel="prefetch" href="/assets/js/153.bd1a0b33.js"><link rel="prefetch" href="/assets/js/154.c1c1bf59.js"><link rel="prefetch" href="/assets/js/155.75ba0e29.js"><link rel="prefetch" href="/assets/js/156.cae28489.js"><link rel="prefetch" href="/assets/js/157.5acee1ed.js"><link rel="prefetch" href="/assets/js/158.88dc7d79.js"><link rel="prefetch" href="/assets/js/159.c58420e2.js"><link rel="prefetch" href="/assets/js/16.339ee9f2.js"><link rel="prefetch" href="/assets/js/160.1f300f94.js"><link rel="prefetch" href="/assets/js/161.b2c8a48c.js"><link rel="prefetch" href="/assets/js/162.e516a5d3.js"><link rel="prefetch" href="/assets/js/163.da33da86.js"><link rel="prefetch" href="/assets/js/164.a8205f3b.js"><link rel="prefetch" href="/assets/js/165.03307d64.js"><link rel="prefetch" href="/assets/js/166.2b8eec49.js"><link rel="prefetch" href="/assets/js/167.568b79dd.js"><link rel="prefetch" href="/assets/js/168.8e4e1c56.js"><link rel="prefetch" href="/assets/js/169.6eb0b952.js"><link rel="prefetch" href="/assets/js/17.ef6780d1.js"><link rel="prefetch" href="/assets/js/170.1444a549.js"><link rel="prefetch" href="/assets/js/171.d87075e3.js"><link rel="prefetch" href="/assets/js/172.f5997d4a.js"><link rel="prefetch" href="/assets/js/173.2a87dc17.js"><link rel="prefetch" href="/assets/js/174.fc6ca112.js"><link rel="prefetch" href="/assets/js/175.de019960.js"><link rel="prefetch" href="/assets/js/176.056ff311.js"><link rel="prefetch" href="/assets/js/177.781eda77.js"><link rel="prefetch" href="/assets/js/178.d81bed35.js"><link rel="prefetch" href="/assets/js/179.bf4a43fc.js"><link rel="prefetch" href="/assets/js/18.5a6cf3fc.js"><link rel="prefetch" href="/assets/js/180.b3a33428.js"><link rel="prefetch" href="/assets/js/181.ca7e8200.js"><link rel="prefetch" href="/assets/js/182.6ba036cf.js"><link rel="prefetch" href="/assets/js/183.98725fdc.js"><link rel="prefetch" href="/assets/js/184.c5dd85ed.js"><link rel="prefetch" href="/assets/js/185.6652dfba.js"><link rel="prefetch" href="/assets/js/186.5e5e6d4f.js"><link rel="prefetch" href="/assets/js/187.c911729d.js"><link rel="prefetch" href="/assets/js/188.beee8df1.js"><link rel="prefetch" href="/assets/js/189.b9dd5e49.js"><link rel="prefetch" href="/assets/js/19.11c855e5.js"><link rel="prefetch" href="/assets/js/190.7cc6b25d.js"><link rel="prefetch" href="/assets/js/191.b3318c6a.js"><link rel="prefetch" href="/assets/js/192.77584b2e.js"><link rel="prefetch" href="/assets/js/193.7c49a9b9.js"><link rel="prefetch" href="/assets/js/194.039bd6ae.js"><link rel="prefetch" href="/assets/js/195.249529a2.js"><link rel="prefetch" href="/assets/js/196.38d4c972.js"><link rel="prefetch" href="/assets/js/197.9cb4bd47.js"><link rel="prefetch" href="/assets/js/198.d91ec442.js"><link rel="prefetch" href="/assets/js/199.47598360.js"><link rel="prefetch" href="/assets/js/2.26d3c737.js"><link rel="prefetch" href="/assets/js/20.8f5af671.js"><link rel="prefetch" href="/assets/js/200.bf98f7e3.js"><link rel="prefetch" href="/assets/js/201.0c537e8a.js"><link rel="prefetch" href="/assets/js/202.74644899.js"><link rel="prefetch" href="/assets/js/203.aa697370.js"><link rel="prefetch" href="/assets/js/204.c1c09887.js"><link rel="prefetch" href="/assets/js/205.34c8ec05.js"><link rel="prefetch" href="/assets/js/206.6dc886f4.js"><link rel="prefetch" href="/assets/js/207.5e8d84b9.js"><link rel="prefetch" href="/assets/js/208.422a78c9.js"><link rel="prefetch" href="/assets/js/209.e668043f.js"><link rel="prefetch" href="/assets/js/21.a7934c2b.js"><link rel="prefetch" href="/assets/js/210.c6fae815.js"><link rel="prefetch" href="/assets/js/211.f38839c5.js"><link rel="prefetch" href="/assets/js/212.6c5a04fc.js"><link rel="prefetch" href="/assets/js/213.626d700e.js"><link rel="prefetch" href="/assets/js/214.44262fd6.js"><link rel="prefetch" href="/assets/js/215.bf166843.js"><link rel="prefetch" href="/assets/js/216.cfc1c958.js"><link rel="prefetch" href="/assets/js/217.84b00f6d.js"><link rel="prefetch" href="/assets/js/218.960ef07c.js"><link rel="prefetch" href="/assets/js/219.315a8eed.js"><link rel="prefetch" href="/assets/js/22.f5e7b054.js"><link rel="prefetch" href="/assets/js/220.a7854988.js"><link rel="prefetch" href="/assets/js/221.1db4e34e.js"><link rel="prefetch" href="/assets/js/222.4eeb50bc.js"><link rel="prefetch" href="/assets/js/223.c4e5b2a6.js"><link rel="prefetch" href="/assets/js/224.64c4cb9f.js"><link rel="prefetch" href="/assets/js/225.0ed4d31b.js"><link rel="prefetch" href="/assets/js/226.c324ae59.js"><link rel="prefetch" href="/assets/js/227.d2b1968d.js"><link rel="prefetch" href="/assets/js/228.489a5017.js"><link rel="prefetch" href="/assets/js/229.48e8e253.js"><link rel="prefetch" href="/assets/js/23.ce1fb220.js"><link rel="prefetch" href="/assets/js/230.b287444d.js"><link rel="prefetch" href="/assets/js/231.1572162d.js"><link rel="prefetch" href="/assets/js/232.c87c013a.js"><link rel="prefetch" href="/assets/js/233.08fe9ed2.js"><link rel="prefetch" href="/assets/js/234.d60497dd.js"><link rel="prefetch" href="/assets/js/235.46eea194.js"><link rel="prefetch" href="/assets/js/236.16dce2fa.js"><link rel="prefetch" href="/assets/js/237.c41331a1.js"><link rel="prefetch" href="/assets/js/238.ee2af549.js"><link rel="prefetch" href="/assets/js/239.192340ee.js"><link rel="prefetch" href="/assets/js/24.45a4d49b.js"><link rel="prefetch" href="/assets/js/240.689e21d0.js"><link rel="prefetch" href="/assets/js/241.c686b138.js"><link rel="prefetch" href="/assets/js/242.bf726d11.js"><link rel="prefetch" href="/assets/js/243.c97fb26e.js"><link rel="prefetch" href="/assets/js/244.0bc3aca2.js"><link rel="prefetch" href="/assets/js/245.e905477e.js"><link rel="prefetch" href="/assets/js/246.c03fd79c.js"><link rel="prefetch" href="/assets/js/247.79f63a32.js"><link rel="prefetch" href="/assets/js/248.41f306db.js"><link rel="prefetch" href="/assets/js/249.85317e41.js"><link rel="prefetch" href="/assets/js/25.b38390d6.js"><link rel="prefetch" href="/assets/js/250.dd05de70.js"><link rel="prefetch" href="/assets/js/251.958400c2.js"><link rel="prefetch" href="/assets/js/252.af20403b.js"><link rel="prefetch" href="/assets/js/253.ab0fc9f2.js"><link rel="prefetch" href="/assets/js/254.f97ef332.js"><link rel="prefetch" href="/assets/js/255.53c2195c.js"><link rel="prefetch" href="/assets/js/256.6cb185f7.js"><link rel="prefetch" href="/assets/js/257.2367b2f0.js"><link rel="prefetch" href="/assets/js/26.69d94a92.js"><link rel="prefetch" href="/assets/js/27.4b2b1653.js"><link rel="prefetch" href="/assets/js/28.cfdbf493.js"><link rel="prefetch" href="/assets/js/29.a96f9a10.js"><link rel="prefetch" href="/assets/js/3.8a12073d.js"><link rel="prefetch" href="/assets/js/30.801b0e22.js"><link rel="prefetch" href="/assets/js/31.c1096013.js"><link rel="prefetch" href="/assets/js/32.d7dc5c26.js"><link rel="prefetch" href="/assets/js/33.78f0a38f.js"><link rel="prefetch" href="/assets/js/34.db348180.js"><link rel="prefetch" href="/assets/js/35.6351de23.js"><link rel="prefetch" href="/assets/js/36.a7e83941.js"><link rel="prefetch" href="/assets/js/37.951e8f98.js"><link rel="prefetch" href="/assets/js/38.95b1157e.js"><link rel="prefetch" href="/assets/js/39.c2bbcdfa.js"><link rel="prefetch" href="/assets/js/4.5719f243.js"><link rel="prefetch" href="/assets/js/40.15f46507.js"><link rel="prefetch" href="/assets/js/41.77e9d575.js"><link rel="prefetch" href="/assets/js/42.4c87bde4.js"><link rel="prefetch" href="/assets/js/43.21c3e896.js"><link rel="prefetch" href="/assets/js/44.9e582158.js"><link rel="prefetch" href="/assets/js/45.86c1009c.js"><link rel="prefetch" href="/assets/js/46.92ba4916.js"><link rel="prefetch" href="/assets/js/47.37805f4f.js"><link rel="prefetch" href="/assets/js/48.982d64ad.js"><link rel="prefetch" href="/assets/js/49.2c1811ae.js"><link rel="prefetch" href="/assets/js/5.238e1904.js"><link rel="prefetch" href="/assets/js/50.901be8c6.js"><link rel="prefetch" href="/assets/js/51.8fa4ab9c.js"><link rel="prefetch" href="/assets/js/53.270d8db1.js"><link rel="prefetch" href="/assets/js/54.7738ca06.js"><link rel="prefetch" href="/assets/js/55.a51efa86.js"><link rel="prefetch" href="/assets/js/56.1d74ec14.js"><link rel="prefetch" href="/assets/js/57.39ba697c.js"><link rel="prefetch" href="/assets/js/58.9034dc72.js"><link rel="prefetch" href="/assets/js/59.6f4cd2d9.js"><link rel="prefetch" href="/assets/js/60.a7aa7246.js"><link rel="prefetch" href="/assets/js/61.ddf69a10.js"><link rel="prefetch" href="/assets/js/62.506d2ae8.js"><link rel="prefetch" href="/assets/js/63.0d7ff181.js"><link rel="prefetch" href="/assets/js/64.d01c6c9d.js"><link rel="prefetch" href="/assets/js/65.91883f22.js"><link rel="prefetch" href="/assets/js/66.95978af8.js"><link rel="prefetch" href="/assets/js/67.90e360c4.js"><link rel="prefetch" href="/assets/js/68.71130ba2.js"><link rel="prefetch" href="/assets/js/69.c59de569.js"><link rel="prefetch" href="/assets/js/70.4a696a9d.js"><link rel="prefetch" href="/assets/js/71.7e455c8c.js"><link rel="prefetch" href="/assets/js/72.37a9e52b.js"><link rel="prefetch" href="/assets/js/73.ad72d3f7.js"><link rel="prefetch" href="/assets/js/74.e2ce415a.js"><link rel="prefetch" href="/assets/js/75.a2c56ded.js"><link rel="prefetch" href="/assets/js/76.7975fcd1.js"><link rel="prefetch" href="/assets/js/77.223ac240.js"><link rel="prefetch" href="/assets/js/78.7c24f8f8.js"><link rel="prefetch" href="/assets/js/79.43838770.js"><link rel="prefetch" href="/assets/js/8.d197c978.js"><link rel="prefetch" href="/assets/js/80.ccc8e6b1.js"><link rel="prefetch" href="/assets/js/81.3aef179b.js"><link rel="prefetch" href="/assets/js/82.e57fff3f.js"><link rel="prefetch" href="/assets/js/83.9a383ef3.js"><link rel="prefetch" href="/assets/js/84.7f4384e1.js"><link rel="prefetch" href="/assets/js/85.f207bb9e.js"><link rel="prefetch" href="/assets/js/86.9112af82.js"><link rel="prefetch" href="/assets/js/87.1e24764d.js"><link rel="prefetch" href="/assets/js/88.08b9ee9f.js"><link rel="prefetch" href="/assets/js/89.32427ef2.js"><link rel="prefetch" href="/assets/js/9.2e4e348a.js"><link rel="prefetch" href="/assets/js/90.4edf494c.js"><link rel="prefetch" href="/assets/js/91.437121c0.js"><link rel="prefetch" href="/assets/js/92.d7463e00.js"><link rel="prefetch" href="/assets/js/93.7f8abceb.js"><link rel="prefetch" href="/assets/js/94.dc99d133.js"><link rel="prefetch" href="/assets/js/95.adcee812.js"><link rel="prefetch" href="/assets/js/96.cc97a0e6.js"><link rel="prefetch" href="/assets/js/97.d60d6145.js"><link rel="prefetch" href="/assets/js/98.308f7e03.js"><link rel="prefetch" href="/assets/js/99.b98820ee.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2a74c09d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/newlogo.png" alt="å„ç´¢æ–¯" class="logo"> <span class="site-name can-hide">å„ç´¢æ–¯</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FrontEnd" class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="FrontEnd" class="mobile-dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å‰ç«¯å¼€å‘
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interview/" class="nav-link">
  å‰ç«¯ä¹±ç‚–
</a></li><li class="dropdown-subitem"><a href="/ECMAScript/" class="nav-link">
  ECMAScript ES6-ES11
</a></li></ul></li><li class="dropdown-item"><h4>
          JavaScriptä¹¦ç±
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/javascript/know-up.html" class="nav-link">
  ä½ ä¸çŸ¥é“çš„JavaScript(ä¸Š)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/know-down.html" class="nav-link">
  ä½ ä¸çŸ¥é“çš„JavaScript(ä¸­ä¸‹)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/algorithm.html" class="nav-link">
  JavaScriptæ•°æ®ç»“æ„å’Œç®—æ³•
</a></li><li class="dropdown-subitem"><a href="/designPattern/" class="nav-link">
  JavaScriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ
</a></li><li class="dropdown-subitem"><a href="/books/javascript/es6.html" class="nav-link">
  æ·±å…¥ç†è§£ES6
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BackEnd" class="dropdown-title"><span class="title">BackEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="BackEnd" class="mobile-dropdown-title"><span class="title">BackEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          æœåŠ¡å™¨å®‰è£…éƒ¨ç½²
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/NginxInstall.html" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Nginx(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Node.html" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Node&amp;pm2(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Mongodb.html" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Mongodb(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/RedisInstall.html" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Redis(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Docker(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Https.html" class="nav-link">
  ğŸ› ï¸ Lets Encryptç”Ÿæˆhttpsè¯ä¹¦
</a></li></ul></li><li class="dropdown-item"><h4>
          åç«¯å¼€å‘
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/node/koa.html" class="nav-link">
  ğŸ“š Koa2æ–‡æ¡£ 
</a></li><li class="dropdown-subitem"><a href="/backend/Redisdocs.html" class="nav-link">
  ğŸ“š Redisæ–‡æ¡£
</a></li><li class="dropdown-subitem"><a href="/backend/Mysql.html" class="nav-link">
  ğŸ“š Mysqlæ–‡æ¡£
</a></li><li class="dropdown-subitem"><a href="/backend/NginxDocs.html" class="nav-link">
  ğŸ“š Nginxæ–‡æ¡£
</a></li><li class="dropdown-subitem"><a href="/DockerDocs/" class="nav-link">
  ğŸ“š Dockeræ–‡æ¡£
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TypeScript" class="dropdown-title"><span class="title">TypeScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="TypeScript" class="mobile-dropdown-title"><span class="title">TypeScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/typescript/base.html" class="nav-link">
  TypeScriptåŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/typescript/challenge.html" class="nav-link">
  TypeScriptç±»å‹æŒ‘æˆ˜
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tutorial" class="dropdown-title"><span class="title">Tutorial</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tutorial" class="mobile-dropdown-title"><span class="title">Tutorial</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å¸¸ç”¨å·¥å…·
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/git/" class="nav-link">
  ğŸ“š Git
</a></li><li class="dropdown-subitem"><a href="/tutorial/google.html" class="nav-link">
  ğŸ“š æˆæƒç™»å½•
</a></li><li class="dropdown-subitem"><a href="/backend/More.html" class="nav-link">
  ğŸ“š More
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å¤–éƒ¨é“¾æ¥
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://ref.xmanv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“š Quick Reference
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“š Linuxå‘½ä»¤å¤§å…¨
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cli.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“š Vue CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“š React CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://www.xmanv.com/" target="_blank" rel="noopener noreferrer" class="repo-link">
    MyBlog
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FrontEnd" class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="FrontEnd" class="mobile-dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å‰ç«¯å¼€å‘
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interview/" class="nav-link">
  å‰ç«¯ä¹±ç‚–
</a></li><li class="dropdown-subitem"><a href="/ECMAScript/" class="nav-link">
  ECMAScript ES6-ES11
</a></li></ul></li><li class="dropdown-item"><h4>
          JavaScriptä¹¦ç±
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/javascript/know-up.html" class="nav-link">
  ä½ ä¸çŸ¥é“çš„JavaScript(ä¸Š)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/know-down.html" class="nav-link">
  ä½ ä¸çŸ¥é“çš„JavaScript(ä¸­ä¸‹)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/algorithm.html" class="nav-link">
  JavaScriptæ•°æ®ç»“æ„å’Œç®—æ³•
</a></li><li class="dropdown-subitem"><a href="/designPattern/" class="nav-link">
  JavaScriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ
</a></li><li class="dropdown-subitem"><a href="/books/javascript/es6.html" class="nav-link">
  æ·±å…¥ç†è§£ES6
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BackEnd" class="dropdown-title"><span class="title">BackEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="BackEnd" class="mobile-dropdown-title"><span class="title">BackEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          æœåŠ¡å™¨å®‰è£…éƒ¨ç½²
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/NginxInstall.html" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Nginx(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Node.html" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Node&amp;pm2(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Mongodb.html" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Mongodb(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/RedisInstall.html" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Redis(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">
  ğŸ› ï¸ é˜¿é‡Œäº‘éƒ¨ç½²Docker(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/Https.html" class="nav-link">
  ğŸ› ï¸ Lets Encryptç”Ÿæˆhttpsè¯ä¹¦
</a></li></ul></li><li class="dropdown-item"><h4>
          åç«¯å¼€å‘
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/node/koa.html" class="nav-link">
  ğŸ“š Koa2æ–‡æ¡£ 
</a></li><li class="dropdown-subitem"><a href="/backend/Redisdocs.html" class="nav-link">
  ğŸ“š Redisæ–‡æ¡£
</a></li><li class="dropdown-subitem"><a href="/backend/Mysql.html" class="nav-link">
  ğŸ“š Mysqlæ–‡æ¡£
</a></li><li class="dropdown-subitem"><a href="/backend/NginxDocs.html" class="nav-link">
  ğŸ“š Nginxæ–‡æ¡£
</a></li><li class="dropdown-subitem"><a href="/DockerDocs/" class="nav-link">
  ğŸ“š Dockeræ–‡æ¡£
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TypeScript" class="dropdown-title"><span class="title">TypeScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="TypeScript" class="mobile-dropdown-title"><span class="title">TypeScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/typescript/base.html" class="nav-link">
  TypeScriptåŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/typescript/challenge.html" class="nav-link">
  TypeScriptç±»å‹æŒ‘æˆ˜
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tutorial" class="dropdown-title"><span class="title">Tutorial</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tutorial" class="mobile-dropdown-title"><span class="title">Tutorial</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å¸¸ç”¨å·¥å…·
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/git/" class="nav-link">
  ğŸ“š Git
</a></li><li class="dropdown-subitem"><a href="/tutorial/google.html" class="nav-link">
  ğŸ“š æˆæƒç™»å½•
</a></li><li class="dropdown-subitem"><a href="/backend/More.html" class="nav-link">
  ğŸ“š More
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å¤–éƒ¨é“¾æ¥
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://ref.xmanv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“š Quick Reference
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“š Linuxå‘½ä»¤å¤§å…¨
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cli.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“š Vue CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ“š React CLI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://www.xmanv.com/" target="_blank" rel="noopener noreferrer" class="repo-link">
    MyBlog
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä»‹ç»</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/introduction/" class="sidebar-link">ä»‹ç»å’Œå‚è€ƒ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æºç ç›®å½•è®¾è®¡å’Œæ¶æ„è®¾è®¡</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/design/" class="sidebar-link">è®¾è®¡</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Rollupæ„å»ºç‰ˆæœ¬</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/rollup/" class="sidebar-link">RollupåŸºç¡€çŸ¥è¯†</a></li><li><a href="/vueAnalysis/rollup/vue.html" class="sidebar-link">Vueä¸­çš„Rollupæ„å»º</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä»å…¥å£åˆ°æ„é€ å‡½æ•°æ•´ä½“æµç¨‹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/entry/" class="sidebar-link">æ•´ä½“æµç¨‹</a></li><li><a href="/vueAnalysis/entry/global.html" class="sidebar-link">initGlobalAPIæµç¨‹</a></li><li><a href="/vueAnalysis/entry/init.html" class="sidebar-link">initMixinæµç¨‹</a></li><li><a href="/vueAnalysis/entry/state.html" class="sidebar-link">stateMixinæµç¨‹</a></li><li><a href="/vueAnalysis/entry/events.html" class="sidebar-link">eventsMixinæµç¨‹</a></li><li><a href="/vueAnalysis/entry/lifecycle.html" class="sidebar-link">lifecycleMixinæµç¨‹</a></li><li><a href="/vueAnalysis/entry/render.html" class="sidebar-link">renderMixinæµç¨‹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>å“åº”å¼åŸç†</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/reactive/" aria-current="page" class="sidebar-link">ä»‹ç»</a></li><li><a href="/vueAnalysis/reactive/prepare.html" class="sidebar-link">å‰ç½®æ ¸å¿ƒæ¦‚å¿µ</a></li><li><a href="/vueAnalysis/reactive/props.html" aria-current="page" class="active sidebar-link">propså¤„ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vueAnalysis/reactive/props.html#propsè§„èŒƒåŒ–" class="sidebar-link">propsè§„èŒƒåŒ–</a></li><li class="sidebar-sub-header"><a href="/vueAnalysis/reactive/props.html#propsåˆå§‹åŒ–" class="sidebar-link">propsåˆå§‹åŒ–</a></li><li class="sidebar-sub-header"><a href="/vueAnalysis/reactive/props.html#propsæ›´æ–°" class="sidebar-link">propsæ›´æ–°</a></li><li class="sidebar-sub-header"><a href="/vueAnalysis/reactive/props.html#toggleobservingä½œç”¨" class="sidebar-link">toggleObservingä½œç”¨</a></li><li class="sidebar-sub-header"><a href="/vueAnalysis/reactive/props.html#æ•´ä½“æµç¨‹å›¾" class="sidebar-link">æ•´ä½“æµç¨‹å›¾</a></li></ul></li><li><a href="/vueAnalysis/reactive/methods.html" class="sidebar-link">methodså¤„ç†</a></li><li><a href="/vueAnalysis/reactive/data.html" class="sidebar-link">dataå¤„ç†</a></li><li><a href="/vueAnalysis/reactive/computed.html" class="sidebar-link">computedå¤„ç†</a></li><li><a href="/vueAnalysis/reactive/watch.html" class="sidebar-link">watchå¤„ç†</a></li><li><a href="/vueAnalysis/reactive/reactive.html" class="sidebar-link">æ·±å…¥å“åº”å¼åŸç†</a></li><li><a href="/vueAnalysis/reactive/dep.html" class="sidebar-link">ä¾èµ–æ”¶é›†</a></li><li><a href="/vueAnalysis/reactive/notify.html" class="sidebar-link">æ´¾å‘æ›´æ–°</a></li><li><a href="/vueAnalysis/reactive/nexttick.html" class="sidebar-link">nextTickå®ç°åŸç†</a></li><li><a href="/vueAnalysis/reactive/problem.html" class="sidebar-link">å˜åŒ–ä¾¦æµ‹æ³¨æ„äº‹é¡¹</a></li><li><a href="/vueAnalysis/reactive/api.html" class="sidebar-link">å˜åŒ–ä¾¦æµ‹APIå®ç°</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è™šæ‹ŸDOMå’ŒVNode</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/dom/" class="sidebar-link">è™šæ‹ŸDOM</a></li><li><a href="/vueAnalysis/dom/vnode.html" class="sidebar-link">VNodeä»‹ç»</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç»„ä»¶åŒ–</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/component/" class="sidebar-link">ç»„ä»¶åŒ–ä»‹ç»</a></li><li><a href="/vueAnalysis/component/mount.html" class="sidebar-link">$mountæ–¹æ³•</a></li><li><a href="/vueAnalysis/component/render.html" class="sidebar-link">renderå’ŒrenderProxy</a></li><li><a href="/vueAnalysis/component/createElement.html" class="sidebar-link">createElement</a></li><li><a href="/vueAnalysis/component/createComponent.html" class="sidebar-link">createComponent</a></li><li><a href="/vueAnalysis/component/merge.html" class="sidebar-link">åˆå¹¶ç­–ç•¥</a></li><li><a href="/vueAnalysis/component/patch.html" class="sidebar-link">patch</a></li><li><a href="/vueAnalysis/component/lifecycle.html" class="sidebar-link">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="/vueAnalysis/component/register.html" class="sidebar-link">ç»„ä»¶æ³¨å†Œ</a></li><li><a href="/vueAnalysis/component/async.html" class="sidebar-link">å¼‚æ­¥ç»„ä»¶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç¼–è¯‘åŸç†</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/compile/" class="sidebar-link">ç¼–è¯‘åŸç†ä»‹ç»</a></li><li><a href="/vueAnalysis/compile/parse.html" class="sidebar-link">parseæ¨¡æ¿è§£æ</a></li><li><a href="/vueAnalysis/compile/optimize.html" class="sidebar-link">optimizeä¼˜åŒ–</a></li><li><a href="/vueAnalysis/compile/codegen.html" class="sidebar-link">codegenä»£ç ç”Ÿæˆ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ‰©å±•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/expand/" class="sidebar-link">æ‰©å±•</a></li><li><a href="/vueAnalysis/expand/directive.html" class="sidebar-link">directiveæŒ‡ä»¤</a></li><li><a href="/vueAnalysis/expand/filter.html" class="sidebar-link">filterè¿‡æ»¤å™¨</a></li><li><a href="/vueAnalysis/expand/vmodel.html" class="sidebar-link">v-model</a></li><li><a href="/vueAnalysis/expand/event.html" class="sidebar-link">eventäº‹ä»¶å¤„ç†</a></li><li><a href="/vueAnalysis/expand/slot.html" class="sidebar-link">æ™®é€šæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½</a></li><li><a href="/vueAnalysis/expand/components.html" class="sidebar-link">å†…ç½®ç»„ä»¶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue-Router</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/router/" class="sidebar-link">Vue-Routerä»‹ç»</a></li><li><a href="/vueAnalysis/router/register.html" class="sidebar-link">è·¯ç”±æ³¨å†Œ</a></li><li><a href="/vueAnalysis/router/matcher.html" class="sidebar-link">matcherä»‹ç»</a></li><li><a href="/vueAnalysis/router/change.html" class="sidebar-link">è·¯ç”±åˆ‡æ¢</a></li><li><a href="/vueAnalysis/router/components.html" class="sidebar-link">å†…ç½®ç»„ä»¶</a></li><li><a href="/vueAnalysis/router/hooks.html" class="sidebar-link">è·¯ç”±hooksé’©å­å‡½æ•°</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vuex</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vueAnalysis/vuex/" class="sidebar-link">Vuexä»‹ç»</a></li><li><a href="/vueAnalysis/vuex/init.html" class="sidebar-link">Vuexåˆå§‹åŒ–</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="propså¤„ç†"><a href="#propså¤„ç†" class="header-anchor">#</a> propså¤„ç†</h1> <p>ä»‹ç»å®Œä»¥ä¸Šå‰ç½®æ ¸å¿ƒæ¦‚å¿µåï¼Œæˆ‘ä»¬ç¬¬ä¸€ä¸ªè¦å­¦ä¹ çš„å°±æ˜¯<code>Vue.js</code>æ˜¯å¦‚ä½•å¤„ç†ä¸<code>props</code>ç›¸å…³çš„é€»è¾‘çš„ã€‚æˆ‘ä»¬æŠŠä¸<code>props</code>ç›¸å…³çš„é€»è¾‘ä¸»è¦åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯<code>props</code>è§„èŒƒåŒ–ã€<code>props</code>åˆå§‹åŒ–å’Œ<code>props</code>æ›´æ–°ã€‚</p> <h2 id="propsè§„èŒƒåŒ–"><a href="#propsè§„èŒƒåŒ–" class="header-anchor">#</a> propsè§„èŒƒåŒ–</h2> <p>åœ¨äº†è§£è§„èŒƒåŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ—ä¸¾ä¸€ä¸‹åœ¨æ—¥å¸¸çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§æ’°å†™ç»„ä»¶<code>props</code>çš„æ–¹å¼ï¼š</p> <ul><li>æ•°ç»„å½¢å¼ï¼š<code>props</code>å¯ä»¥å†™æˆä¸€ä¸ªæ•°ç»„ï¼Œä½†æ•°ç»„ä¸­çš„<code>key</code>å…ƒç´ å¿…é¡»ä¸º<code>string</code>ç±»å‹ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>é”®å€¼ä¸ä¸ºå¯¹è±¡ï¼šæ­¤ç§æ–¹å¼å¸¸è§äºåªéœ€è¦å®šä¹‰<code>key</code>ç±»å‹çš„<code>props</code>ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> String
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>è§„èŒƒæ ¼å¼ï¼šæ­¤ç§æ–¹å¼æ˜¯<code>Vue.js</code>æ¥å—<code>props</code>æœ€å¥½çš„æ ¼å¼ï¼Œå¯¹äºä¸€ä¸ªæœ‰å¾ˆé«˜è¦æ±‚çš„ç»„ä»¶æ¥è¯´ï¼Œå®ƒé€šè¿‡ä¼šæ’°å†™å¾ˆä¸¥æ ¼çš„<code>props</code>è§„åˆ™ï¼Œè¿™åœ¨å„ä¸ªå¼€æºUIæ¡†æ¶ä¸­æ˜¯æœ€å¸¸è§çš„ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token function">validator</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">&lt;=</span> <span class="token number">100</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è€Œ<code>props</code>è§„èŒƒåŒ–æ‰€åšçš„äº‹æƒ…ï¼Œå°±æ˜¯æŠŠå„ç§ä¸æ˜¯è§„èŒƒæ ¼å¼çš„å½¢å¼ï¼Œè§„èŒƒåŒ–ä¸ºè§„èŒƒæ ¼å¼ï¼Œæ–¹ä¾¿<code>Vue.js</code>åœ¨åç»­çš„è¿‡ç¨‹ä¸­å¤„ç†<code>props</code>ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥åˆ†æ<code>Vue.js</code>æ˜¯å¦‚ä½•å¯¹<code>props</code>è§„èŒƒåŒ–çš„ã€‚</p> <p><code>props</code>è§„èŒƒåŒ–çš„è¿‡ç¨‹å‘ç”Ÿåœ¨<code>this._init()</code>æ–¹æ³•ä¸­çš„<code>mergeOptions</code>åˆå¹¶é…ç½®ä¸­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mergeOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../util/index'</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">_init</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">this</span>
  vm<span class="token punctuation">.</span>$options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>
    <span class="token function">resolveConstructorOptions</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">,</span>
    options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    vm
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ä¸­<code>mergeOptions()</code>æ–¹æ³•æ˜¯å®šä¹‰åœ¨<code>src/core/util/options.js</code>æ–‡ä»¶ä¸­ï¼Œå®ƒåœ¨å…¶ä¸­æœ‰ä¸€æ®µè¿™æ ·çš„æ–¹æ³•è°ƒç”¨ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mergeOptions</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">parent</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
  <span class="token literal-property property">child</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
  vm<span class="token operator">?</span><span class="token operator">:</span> Component</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Object <span class="token punctuation">{</span>
  <span class="token comment">// çœç•¥ä»£ç </span>
  <span class="token function">normalizeProps</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
  <span class="token keyword">return</span> options
<span class="token punctuation">}</span> 
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè§„èŒƒåŒ–<code>props</code>çš„ä»£ç ï¼Œä¸»è¦é›†ä¸­åœ¨<code>normalizeProps()</code>æ–¹æ³•ä¸­ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†åˆ†æ<code>normalizeProps()</code>æ–¹æ³•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">normalizeProps</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> Object<span class="token punctuation">,</span> <span class="token literal-property property">vm</span><span class="token operator">:</span> <span class="token operator">?</span>Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> options<span class="token punctuation">.</span>props
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>props<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">let</span> i<span class="token punctuation">,</span> val<span class="token punctuation">,</span> name
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    i <span class="token operator">=</span> props<span class="token punctuation">.</span>length
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      val <span class="token operator">=</span> props<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> <span class="token function">camelize</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
        res<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'props must be strings when using array syntax.'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      val <span class="token operator">=</span> props<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
      name <span class="token operator">=</span> <span class="token function">camelize</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
      res<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">isPlainObject</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
        <span class="token operator">?</span> val
        <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> val <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">warn</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Invalid value for option &quot;props&quot;: expected an Array or an Object, </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">but got </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">toRawType</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      vm
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  options<span class="token punctuation">.</span>props <span class="token operator">=</span> res
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ºäº†æ›´å¥½çš„ç†è§£<code>normalizeProps()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥æ’°å†™å‡ ä¸ªæ¡ˆä¾‹æ¥è¯¦ç»†è¯´æ˜ï¼š</p> <ul><li>æ•°ç»„å½¢å¼ï¼šå½“<code>props</code>æ˜¯æ•°ç»„æ—¶ï¼Œä¼šé¦–å…ˆå€’åºéå†è¿™ä¸ªæ•°ç»„ï¼Œç„¶åä½¿ç”¨<code>typeof</code>æ¥åˆ¤æ–­æ•°ç»„å…ƒç´ çš„ç±»å‹ã€‚å¦‚æœä¸æ˜¯<code>string</code>ç±»å‹ï¼Œåˆ™åœ¨å¼€å‘ç¯å¢ƒä¸‹æŠ¥é”™ï¼Œå¦‚æœæ˜¯<code>string</code>ç±»å‹ï¼Œåˆ™å…ˆæŠŠ<code>key</code>è½¬åŒ–ä¸ºé©¼å³°å½¢å¼ï¼Œç„¶åæŠŠè¿™ä¸ª<code>key</code>èµ‹å€¼åˆ°ä¸´æ—¶çš„<code>res</code>å¯¹è±¡ä¸­ï¼Œæ­¤æ—¶çš„é”®å€¼å›ºå®šä¸º<code>{ type: null }</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è§„èŒƒåŒ–å‰</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'nick-name'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// è§„èŒƒåŒ–å</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>å¯¹è±¡å½¢å¼ï¼šå½“ä¸ºå¯¹è±¡æ—¶ä¼šä½¿ç”¨<code>for-in</code>éå†å¯¹è±¡ï¼Œç´§æ¥ç€å’Œæ•°ç»„å½¢å¼ä¸€æ ·ä½¿ç”¨<code>camelize</code>æ¥æŠŠ<code>key</code>è½¬æˆé©¼å³°å½¢å¼ï¼Œç„¶åä½¿ç”¨<code>isPlainObject()</code>æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦ä¸ºæ™®é€šå¯¹è±¡ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™è½¬æˆ<code>{ type: Type }</code>å¯¹è±¡å½¢å¼ï¼Œå…¶ä¸­<code>Type</code>ä¸ºå®šä¹‰<code>key</code>æ—¶çš„<code>Type</code>ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç›´æ¥ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è§„èŒƒåŒ–å‰</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> Number
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è§„èŒƒåŒ–å</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>æ—¢ä¸æ˜¯æ•°ç»„å½¢å¼ä¹Ÿä¸æ˜¯å¯¹è±¡å½¢å¼ï¼šæŠ¥é”™</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æŠ¥é”™ï¼šInvalid value for option &quot;props&quot;: expected an Array or an Objectï¼Œbut got String</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token string">'name, age'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="propsåˆå§‹åŒ–"><a href="#propsåˆå§‹åŒ–" class="header-anchor">#</a> propsåˆå§‹åŒ–</h2> <p>åœ¨äº†è§£äº†<code>props</code>è§„èŒƒåŒ–åï¼Œæˆ‘ä»¬ç´§æ¥ç€æ¥äº†è§£ä¸€ä¸‹<code>props</code>åˆå§‹åŒ–çš„è¿‡ç¨‹ã€‚<code>props</code>åˆå§‹åŒ–è¿‡ç¨‹åŒæ ·æ˜¯å‘ç”Ÿåœ¨<code>this._init()</code>æ–¹æ³•ä¸­ï¼Œå®ƒåœ¨<code>initState</code>çš„æ—¶å€™è¢«å¤„ç†ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initState</span> <span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// çœç•¥ä»£ç </span>
  <span class="token keyword">const</span> opts <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options
  <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token function">initProps</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>props<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åæˆ‘ä»¬æ¥è¯¦ç»†çœ‹ä¸€ä¸‹<code>initProps</code>ä¸­çš„ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">initProps</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">vm</span><span class="token operator">:</span> Component<span class="token punctuation">,</span> <span class="token literal-property property">propsOptions</span><span class="token operator">:</span> Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> propsData <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>propsData <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> vm<span class="token punctuation">.</span>_props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> keys <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_propKeys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> isRoot <span class="token operator">=</span> <span class="token operator">!</span>vm<span class="token punctuation">.</span>$parent
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRoot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> propsOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token function">validateProp</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> propsOptions<span class="token punctuation">,</span> propsData<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> hyphenatedKey <span class="token operator">=</span> <span class="token function">hyphenate</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isReservedAttribute</span><span class="token punctuation">(</span>hyphenatedKey<span class="token punctuation">)</span> <span class="token operator">||</span>
          config<span class="token punctuation">.</span><span class="token function">isReservedAttr</span><span class="token punctuation">(</span>hyphenatedKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hyphenatedKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; is a reserved attribute and cannot be used as component prop.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          vm
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token function">defineReactive</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRoot <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isUpdatingChildComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">warn</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Avoid mutating a prop directly since the value will be </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">overwritten whenever the parent component re-renders. </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Instead, use a data or computed property based on the prop's </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">value. Prop being mutated: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            vm
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">defineReactive</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> vm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">proxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_props</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ä»”ç»†é˜…è¯»<code>initProps()</code>æ–¹æ³•åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹<code>initProps()</code>æ–¹æ³•è¿›è¡Œæ€»ç»“ï¼Œå®ƒä¸»è¦åšä¸‰ä»¶äº‹æƒ…ï¼š<strong>propsæ ¡éªŒå’Œæ±‚å€¼</strong>ã€<strong>propså“åº”å¼</strong>å’Œ<strong>propsä»£ç†</strong>ã€‚</p> <h3 id="propså“åº”å¼"><a href="#propså“åº”å¼" class="header-anchor">#</a> propså“åº”å¼</h3> <p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ€ç®€å•çš„<code>props</code>å“åº”å¼ï¼Œè¿™éƒ¨åˆ†çš„è¿‡ç¨‹ä¸»è¦ä½¿ç”¨äº†æˆ‘ä»¬åœ¨ä¹‹å‰ä»‹ç»è¿‡çš„<code>defineReactive</code>æ–¹æ³•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">defineReactive</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRoot <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isUpdatingChildComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">warn</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Avoid mutating a prop directly since the value will be </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">overwritten whenever the parent component re-renders. </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Instead, use a data or computed property based on the prop's </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">value. Prop being mutated: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      vm
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å”¯ä¸€å€¼å¾—æ³¨æ„çš„åœ°æ–¹å°±æ˜¯ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œ<code>props</code>çš„å“åº”å¼åŠ«æŒäº†<code>setter</code>æ–¹æ³•ï¼Œè¿™æ ·åšçš„æ˜¯ä¸ºäº†ä¿è¯<code>props</code>ä¸ºå•é¡¹æ•°æ®æµï¼šæ—¢æˆ‘ä»¬ä¸èƒ½åœ¨å­ç»„ä»¶ä¸­ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’çš„<code>props</code>å€¼ã€‚</p> <h3 id="propsä»£ç†"><a href="#propsä»£ç†" class="header-anchor">#</a> propsä»£ç†</h3> <p>ç»è¿‡<code>props</code>å“åº”å¼åï¼Œæˆ‘ä»¬ä¼šåœ¨å®ä¾‹ä¸Šå¾—åˆ°<code>this._props</code>å¯¹è±¡ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ›´å¥½çš„è·å–<code>props</code>çš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦å¯¹<code>props</code>åšä¸€å±‚<code>proxy</code>ä»£ç†ã€‚å…³äº<code>proxy</code>çš„å®ç°ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­ä»‹ç»è¿‡äº†ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>_props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä»£ç†å‰</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_props<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token function">proxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_props</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token comment">// ä»£ç†å</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</code></pre></div><h3 id="propsæ ¡éªŒæ±‚å€¼"><a href="#propsæ ¡éªŒæ±‚å€¼" class="header-anchor">#</a> propsæ ¡éªŒæ±‚å€¼</h3> <p>æœ€åæˆ‘ä»¬æ¥çœ‹ç¨å¾®å¤æ‚ä¸€ç‚¹çš„<code>props</code>æ ¡éªŒæ±‚å€¼ï¼Œè¿™éƒ¨åˆ†çš„åŠŸèƒ½å‘ç”Ÿåœ¨<code>validateProp</code>ï¼Œå®ƒçš„ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">validateProp</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">key</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">propOptions</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
  <span class="token literal-property property">propsData</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
  vm<span class="token operator">?</span><span class="token operator">:</span> Component</span>
<span class="token punctuation">)</span><span class="token operator">:</span> any <span class="token punctuation">{</span>
  <span class="token keyword">const</span> prop <span class="token operator">=</span> propOptions<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token keyword">const</span> absent <span class="token operator">=</span> <span class="token operator">!</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>propsData<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
  <span class="token keyword">let</span> value <span class="token operator">=</span> propsData<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token comment">// boolean casting</span>
  <span class="token keyword">const</span> booleanIndex <span class="token operator">=</span> <span class="token function">getTypeIndex</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">,</span> prop<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>booleanIndex <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>absent <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> <span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      value <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span> value <span class="token operator">===</span> <span class="token function">hyphenate</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// only cast empty string / same name to boolean if</span>
      <span class="token comment">// boolean has higher priority</span>
      <span class="token keyword">const</span> stringIndex <span class="token operator">=</span> <span class="token function">getTypeIndex</span><span class="token punctuation">(</span>String<span class="token punctuation">,</span> prop<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>stringIndex <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> booleanIndex <span class="token operator">&lt;</span> stringIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// check default value</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> <span class="token function">getPropDefaultValue</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token comment">// since the default value is a fresh copy,</span>
    <span class="token comment">// make sure to observe it.</span>
    <span class="token keyword">const</span> prevShouldObserve <span class="token operator">=</span> shouldObserve
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token function">observe</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span>prevShouldObserve<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span>
    <span class="token comment">// skip validation for weex recycle-list child component props</span>
    <span class="token operator">!</span><span class="token punctuation">(</span>__WEEX__ <span class="token operator">&amp;&amp;</span> <span class="token function">isObject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">'@binding'</span> <span class="token keyword">in</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">assertProp</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> absent<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> value
<span class="token punctuation">}</span>
</code></pre></div><p><strong>ä»£ç åˆ†æ</strong>ï¼šæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸Šä»£ç ä¸­å‘ç°ï¼Œ<code>validateProp</code>è™½ç„¶è¯´çš„æ˜¯å¸¦æœ‰æ ¡éªŒçš„åŠŸèƒ½ï¼Œä½†å®ƒå¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯è¿›è€Œé˜»æ­¢<code>validateProp()</code>æ–¹æ³•è¿”å›<code>value</code>ï¼Œè€Œæ˜¯æ ¹æ®æ ¡éªŒçš„è¿‡ç¨‹ä¸­çš„ä¸åŒæƒ…å†µå°½å¯èƒ½çš„æç¤ºå‡ºå¾ˆæ¸…æ™°çš„æç¤ºã€‚å®è´¨ä¸Š<code>validateProp()</code>æ–¹æ³•æœ€ä¸»è¦çš„è¿˜æ˜¯è¿”å›<code>value</code>ï¼ŒåŒæ—¶ä¹Ÿæ ¹æ®ä¸åŒçš„<code>props</code>å†™æ³•å¤„ç†ä¸åŒçš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥å°†<code>validateProp()</code>æ–¹æ³•è¿›è¡Œæ€»ç»“ï¼Œå®ƒä¸»è¦åšå¦‚ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p> <ul><li>å¤„ç†<code>Boolean</code>ç±»å‹çš„<code>props</code>ã€‚</li> <li>å¤„ç†<code>default</code>é»˜è®¤æ•°æ®ã€‚</li> <li><code>props</code>æ–­è¨€ã€‚</li></ul> <p>é‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥å°†åˆ†åˆ«å¯¹è¿™å‡ ä»¶äº‹æƒ…è¿›è¡Œè¯¦ç»†çš„æè¿°ã€‚</p> <h4 id="å¤„ç†booleanç±»å‹"><a href="#å¤„ç†booleanç±»å‹" class="header-anchor">#</a> å¤„ç†Booleanç±»å‹</h4> <p>æˆ‘ä»¬å…ˆæ¥çœ‹å‡ ä¸ª<code>props</code>ä¼ é€’<code>Boolean</code>çš„ä¾‹å­ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Component A</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">fixed</span><span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Component B</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token punctuation">[</span>Boolean<span class="token punctuation">,</span> String<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Component C</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åå›åˆ°æºç ä¸­å¤„ç†<code>Boolean</code>ç±»å‹<code>getTypeIndex</code>çš„åœ°æ–¹ï¼Œè¿™ä¸ªå‡½æ•°çš„ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getTypeIndex</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> expectedTypes</span><span class="token punctuation">)</span><span class="token operator">:</span> number <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>expectedTypes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">isSameType</span><span class="token punctuation">(</span>expectedTypes<span class="token punctuation">,</span> type<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> expectedTypes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isSameType</span><span class="token punctuation">(</span>expectedTypes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> i
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸ªå‡½æ•°çš„å®ç°é€»è¾‘æ¯”è¾ƒæ¸…æ™°ï¼š</p> <ol><li>ä»¥<code>Component A</code>ç»„ä»¶ä¸ºä¾‹ï¼Œå®ƒçš„<code>props</code>ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ä½†å´æ˜¯<code>Boolean</code>ç±»å‹ï¼Œå› æ­¤è¿”å›ç´¢å¼•<code>0</code>ã€‚</li> <li>ä»¥<code>Component B</code>ç»„ä»¶ä¸ºä¾‹ï¼Œå› ä¸ºå®ƒçš„<code>props</code>éƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥è¦éå†è¿™ä¸ªæ•°ç»„ï¼Œç„¶åè¿”å›<code>Boolean</code>ç±»å‹åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•<code>i</code>ã€‚</li> <li>ä»¥<code>Component C</code>ç»„ä»¶ä¸ºä¾‹ï¼Œè™½ç„¶å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ•°ç»„ä¸­æ²¡æœ‰ä»»ä½•å…ƒç´ ï¼Œå› æ­¤è¿”å›ç´¢å¼•<code>-1</code>ã€‚</li></ol> <p>åœ¨æ‹¿åˆ°<code>booleanIndex</code>åï¼Œæˆ‘ä»¬éœ€è¦èµ°ä¸‹é¢è¿™æ®µä»£ç é€»è¾‘ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> booleanIndex <span class="token operator">=</span> <span class="token function">getTypeIndex</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">,</span> prop<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>booleanIndex <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>absent <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> <span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span> value <span class="token operator">===</span> <span class="token function">hyphenate</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// only cast empty string / same name to boolean if</span>
    <span class="token comment">// boolean has higher priority</span>
    <span class="token keyword">const</span> stringIndex <span class="token operator">=</span> <span class="token function">getTypeIndex</span><span class="token punctuation">(</span>String<span class="token punctuation">,</span> prop<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stringIndex <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> booleanIndex <span class="token operator">&lt;</span> stringIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      value <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç åˆ†æï¼š</p> <ul><li>åœ¨<code>if</code>æ¡ä»¶åˆ¤æ–­ä¸­<code>absent</code>ä»£è¡¨è™½ç„¶æˆ‘ä»¬åœ¨å­ç»„ä»¶ä¸­å®šä¹‰äº†<code>props</code>ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶å¹¶æ²¡æœ‰ä¼ é€’ä»»ä½•å€¼ï¼Œç„¶å<code>&amp;</code>æ¡ä»¶åˆåˆ¤æ–­äº†å­ç»„ä»¶<code>props</code>æœ‰æ²¡æœ‰æä¾›<code>default</code>é»˜è®¤å€¼é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå®ƒçš„å€¼åªèƒ½ä¸º<code>false</code>ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// çˆ¶ç»„ä»¶æœªä¼ é€’fixed</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ParentComponent'</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;child-component /&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// å­ç»„ä»¶fixedå€¼å–false</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ChildComponent'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">fixed</span><span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>åœ¨<code>else if</code>æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­äº†ä¸¤ç§ç‰¹æ®Šçš„<code>props</code>ä¼ é€’æ–¹å¼ï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Parent Component A</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ParentComponentA'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;child-component fixed /&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// Parent Component B</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ParentComponentB'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;child-component fixed=&quot;fixed&quot; /&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯¹äºç¬¬ä¸€ä¸ªç§æƒ…å†µ<code>stringIndex</code>ä¸º<code>-1</code>ï¼Œ<code>booleanIndex</code>ä¸º<code>0</code>ï¼Œå› æ­¤<code>value</code>çš„å€¼ä¸º<code>true</code>ã€‚å¯¹äºç¬¬äºŒç§æƒ…å†µï¼Œåˆ™éœ€è¦æ ¹æ®<code>props</code>çš„å®šä¹‰å…·ä½“åŒºåˆ†ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Child Component A</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ChildComponentA'</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token punctuation">[</span>Boolean<span class="token punctuation">,</span> String<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Child Component B</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ChildComponentB'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Boolean<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>å¯¹äº<code>ChildComponentA</code>æ¥è¯´ï¼Œç”±äº<code>stringIndex</code>å€¼ä¸º<code>1</code>ï¼Œ<code>booleanIndex</code>å€¼ä¸º<code>0</code>ï¼Œ<code>booleanIndex &lt; stringIndex</code>å› æ­¤æˆ‘ä»¬å¯ä»¥è®¤ä¸º<code>Boolean</code>å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œæ­¤æ—¶<code>value</code>çš„å€¼ä¸º<code>true</code>ã€‚</li> <li>å¯¹äº<code>ChildComponentB</code>æ¥è¯´ï¼Œç”±äº<code>stringIndex</code>å€¼ä¸º<code>0</code>ï¼Œ<code>booleanIndex</code>å€¼ä¸º<code>1</code>ï¼Œ<code>stringIndex &lt; booleanIndex</code>å› æ­¤æˆ‘ä»¬å¯ä»¥è®¤ä¸º<code>String</code>å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œæ­¤æ—¶<code>value</code>çš„å€¼ä¸å¤„ç†ã€‚</li></ol> <h4 id="å¤„ç†defaulté»˜è®¤æ•°æ®"><a href="#å¤„ç†defaulté»˜è®¤æ•°æ®" class="header-anchor">#</a> å¤„ç†defaulté»˜è®¤æ•°æ®</h4> <p>å¤„ç†å®Œ<code>Boolean</code>ç±»å‹åï¼Œæˆ‘ä»¬æ¥å¤„ç†é»˜è®¤å€¼ï¼Œæ—¢æˆ‘ä»¬æåˆ°è¿‡çš„è™½ç„¶å­ç»„ä»¶å®šä¹‰äº†<code>props</code>ï¼Œä½†çˆ¶ç»„ä»¶æ²¡æœ‰ä¼ é€’çš„æƒ…å†µã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// çˆ¶ç»„ä»¶æœªä¼ é€’fixed</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ParentComponent'</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;child-component /&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// å­ç»„ä»¶æä¾›äº†defaulté€‰é¡¹</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ChildComponent'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯¹äºä»¥ä¸Šæ¡ˆä¾‹ä¼šèµ°å¦‚ä¸‹ä»£ç çš„é€»è¾‘ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  value <span class="token operator">=</span> <span class="token function">getPropDefaultValue</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getPropDefaultValue</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">vm</span><span class="token operator">:</span> <span class="token operator">?</span>Component<span class="token punctuation">,</span> <span class="token literal-property property">prop</span><span class="token operator">:</span> PropOptions<span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span><span class="token operator">:</span> any <span class="token punctuation">{</span>
  <span class="token comment">// no default, return undefined</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> <span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">undefined</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> def <span class="token operator">=</span> prop<span class="token punctuation">.</span>default
  <span class="token comment">// warn against non-factory defaults for Object &amp; Array</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isObject</span><span class="token punctuation">(</span>def<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">warn</span><span class="token punctuation">(</span>
      <span class="token string">'Invalid default value for prop &quot;'</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">'&quot;: '</span> <span class="token operator">+</span>
      <span class="token string">'Props with type Object/Array must use a factory function '</span> <span class="token operator">+</span>
      <span class="token string">'to return the default value.'</span><span class="token punctuation">,</span>
      vm
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// the raw prop value was also undefined from previous render,</span>
  <span class="token comment">// return previous default value to avoid unnecessary watcher trigger</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>vm <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>propsData <span class="token operator">&amp;&amp;</span>
    vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>propsData<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span>
    vm<span class="token punctuation">.</span>_props<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> vm<span class="token punctuation">.</span>_props<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// call factory function for non-Function types</span>
  <span class="token comment">// a value is Function if its prototype is function even across different execution context</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> def <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">getType</span><span class="token punctuation">(</span>prop<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'Function'</span>
    <span class="token operator">?</span> <span class="token function">def</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>
    <span class="token operator">:</span> def
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç åˆ†æï¼š</p> <ol><li>é¦–å…ˆåˆ¤æ–­äº†å­ç»„ä»¶æœ‰æ²¡æœ‰æä¾›<code>default</code>é»˜è®¤å€¼é€‰é¡¹ï¼Œæ²¡æœ‰åˆ™ç›´æ¥è¿”å›<code>undefined</code>ã€‚</li> <li>éšååˆ¤æ–­äº†<code>default</code>å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™æç¤ºå¿…é¡»æŠŠ<code>default</code>å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œæ—¢ï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment">// å¿…é¡»å†™æˆ</span>
<span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>æœ€åå†æ ¹æ®<code>default</code>çš„ç±»å‹æ¥å–å€¼ï¼Œå¦‚æœæ˜¯å‡½æ•°ç±»å‹åˆ™è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¦‚æœä¸æ˜¯å‡½æ•°ç±»å‹åˆ™ç›´æ¥ä½¿ç”¨ã€‚</li> <li>å…¶ä¸­ä¸‹é¢ä¸€æ®µä»£ç åœ¨è¿™é‡Œæˆ‘ä»¬å¹¶ä¸ä¼šè¯´æ˜å’Œåˆ†æå®ƒçš„å…·ä½“ä½œç”¨ï¼Œè€Œæ˜¯ä¼šåœ¨<code>props</code>æ›´æ–°ç« èŠ‚æ¥ä»‹ç»ã€‚</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>vm <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>propsData <span class="token operator">&amp;&amp;</span>
  vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>propsData<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span>
  vm<span class="token punctuation">.</span>_props<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> vm<span class="token punctuation">.</span>_props<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="propsæ–­è¨€"><a href="#propsæ–­è¨€" class="header-anchor">#</a> propsæ–­è¨€</h4> <p>æœ€åæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹<code>props</code>æ–­è¨€ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">assertProp</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">prop</span><span class="token operator">:</span> PropOptions<span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> any<span class="token punctuation">,</span>
  <span class="token literal-property property">vm</span><span class="token operator">:</span> <span class="token operator">?</span>Component<span class="token punctuation">,</span>
  <span class="token literal-property property">absent</span><span class="token operator">:</span> boolean</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prop<span class="token punctuation">.</span>required <span class="token operator">&amp;&amp;</span> absent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">warn</span><span class="token punctuation">(</span>
      <span class="token string">'Missing required prop: &quot;'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'&quot;'</span><span class="token punctuation">,</span>
      vm
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>prop<span class="token punctuation">.</span>required<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> type <span class="token operator">=</span> prop<span class="token punctuation">.</span>type
  <span class="token keyword">let</span> valid <span class="token operator">=</span> <span class="token operator">!</span>type <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token boolean">true</span>
  <span class="token keyword">const</span> expectedTypes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      type <span class="token operator">=</span> <span class="token punctuation">[</span>type<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> type<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>valid<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> assertedType <span class="token operator">=</span> <span class="token function">assertType</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> type<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      expectedTypes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>assertedType<span class="token punctuation">.</span>expectedType <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span>
      valid <span class="token operator">=</span> assertedType<span class="token punctuation">.</span>valid
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">warn</span><span class="token punctuation">(</span>
      <span class="token function">getInvalidTypeMessage</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> expectedTypes<span class="token punctuation">)</span><span class="token punctuation">,</span>
      vm
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> validator <span class="token operator">=</span> prop<span class="token punctuation">.</span>validator
  <span class="token keyword">if</span> <span class="token punctuation">(</span>validator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">validator</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token string">'Invalid prop: custom validator check failed for prop &quot;'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'&quot;.'</span><span class="token punctuation">,</span>
        vm
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨<code>assertProp</code>ä¸­æˆ‘ä»¬æœ‰ä¸‰ç§æƒ…å†µéœ€è¦å»æ–­è¨€ï¼š</p> <ul><li><code>required</code>ï¼šå¦‚æœå­ç»„ä»¶<code>props</code>æä¾›äº†<code>required</code>é€‰é¡¹ï¼Œä»£è¡¨è¿™ä¸ª<code>props</code>å¿…é¡»åœ¨çˆ¶ç»„ä»¶ä¸­ä¼ é€’å€¼ï¼Œå¦‚æœä¸ä¼ é€’åˆ™æŠ›å‡ºé”™è¯¯ä¿¡æ¯<code>Missing required prop: fixed</code>ã€‚</li> <li>å¯¹äºå®šä¹‰äº†å¤šä¸ª<code>type</code>çš„ç±»å‹æ•°ç»„ï¼Œåˆ™æˆ‘ä»¬ä¼šéå†è¿™ä¸ªç±»å‹æ•°ç»„ï¼Œåªè¦å½“å‰<code>props</code>çš„ç±»å‹å’Œç±»å‹æ•°ç»„ä¸­æŸä¸€ä¸ªå…ƒç´ åŒ¹é…åˆ™ç»ˆæ­¢éå†ã€‚ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯æç¤ºä¿¡æ¯ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Parent Component</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ParentComponent'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;child-component :age=&quot;true&quot; /&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
<span class="token comment">// Chil Component</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ChilComponent'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">[</span>Number<span class="token punctuation">,</span> String<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ¥é”™ï¼šInvalid prop: type check failed for prop ageï¼ŒExpected Number, Stringï¼Œgot with value true</span>
</code></pre></div><ul><li>ç”¨æˆ·è‡ªå·±æä¾›çš„<code>validator</code>æ ¡éªŒå™¨æˆ‘ä»¬ä¹Ÿéœ€è¦è¿›è¡Œæ–­è¨€ï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Parent Component</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ParentComponent'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;child-component :age=&quot;101&quot; /&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
<span class="token comment">// Chil Component</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'ChilComponent'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token function">validator</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">&lt;=</span><span class="token number">100</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ¥é”™ï¼šInvalid prop: custom validator check failed for prop age</span>
</code></pre></div><h2 id="propsæ›´æ–°"><a href="#propsæ›´æ–°" class="header-anchor">#</a> propsæ›´æ–°</h2> <p>æˆ‘ä»¬éƒ½çŸ¥é“å­ç»„ä»¶çš„<code>props</code>å€¼æ¥æºäºçˆ¶ç»„ä»¶ï¼Œå½“çˆ¶ç»„ä»¶å€¼æ›´æ–°æ—¶ï¼Œå­ç»„ä»¶çš„å€¼ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼ŒåŒæ—¶è§¦å‘å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚æˆ‘ä»¬å…ˆè·³è¿‡çˆ¶ç»„ä»¶çš„å…·ä½“ç¼–è¯‘é€»è¾‘ï¼Œç›´æ¥çœ‹çˆ¶ç»„ä»¶çš„å€¼æ›´æ–°ï¼Œæ”¹å˜å­ç»„ä»¶<code>props</code>å€¼çš„æ­¥éª¤ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">updateChildComponent</span> <span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">vm</span><span class="token operator">:</span> Component<span class="token punctuation">,</span>
  <span class="token literal-property property">propsData</span><span class="token operator">:</span> <span class="token operator">?</span>Object<span class="token punctuation">,</span>
  <span class="token literal-property property">listeners</span><span class="token operator">:</span> <span class="token operator">?</span>Object<span class="token punctuation">,</span>
  <span class="token literal-property property">parentVnode</span><span class="token operator">:</span> MountedComponentVNode<span class="token punctuation">,</span>
  <span class="token literal-property property">renderChildren</span><span class="token operator">:</span> <span class="token operator">?</span>Array<span class="token operator">&lt;</span>VNode<span class="token operator">&gt;</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// çœç•¥ä»£ç </span>
  <span class="token comment">// update props</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>propsData <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> props <span class="token operator">=</span> vm<span class="token punctuation">.</span>_props
    <span class="token keyword">const</span> propKeys <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_propKeys <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> propKeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> key <span class="token operator">=</span> propKeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">const</span> <span class="token literal-property property">propOptions</span><span class="token operator">:</span> any <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>props <span class="token comment">// wtf flow?</span>
      props<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">validateProp</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> propOptions<span class="token punctuation">,</span> propsData<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token comment">// keep a copy of raw propsData</span>
    vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>propsData <span class="token operator">=</span> propsData
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç åˆ†æï¼š</p> <ol><li>ä»¥ä¸Š<code>vm</code>å®ä¾‹ä¸ºå­ç»„ä»¶ï¼Œ<code>propsData</code>ä¸ºçˆ¶ç»„ä»¶ä¸­ä¼ é€’çš„<code>props</code>çš„å€¼ï¼Œè€Œ<code>_propKeys</code>æ˜¯ä¹‹å‰<code>props</code>åˆå§‹åŒ–è¿‡ç¨‹ä¸­ç¼“å­˜èµ·æ¥çš„æ‰€æœ‰çš„<code>props</code>çš„keyã€‚</li> <li>åœ¨çˆ¶ç»„ä»¶å€¼æ›´æ–°åï¼Œä¼šé€šè¿‡éå†<code>propsKey</code>æ¥é‡æ–°å¯¹å­ç»„ä»¶<code>props</code>è¿›è¡Œ<strong>æ ¡éªŒæ±‚å€¼</strong>ï¼Œæœ€åèµ‹å€¼ã€‚</li></ol> <p>ä»¥ä¸Šä»£ç å°±æ˜¯å­ç»„ä»¶<code>props</code>æ›´æ–°çš„è¿‡ç¨‹ï¼Œåœ¨<code>props</code>æ›´æ–°åä¼šè¿›è¡Œå­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸ªé‡æ–°æ¸²æŸ“çš„è¿‡ç¨‹åˆ†ä¸¤ç§æƒ…å†µï¼š</p> <ul><li>æ™®é€š<code>props</code>å€¼è¢«ä¿®æ”¹ï¼šå½“<code>props</code>å€¼è¢«ä¿®æ”¹åï¼Œå…¶ä¸­æœ‰æ®µä»£ç <code>props[key] = validateProp(key, propOptions, propsData, vm)</code>æ ¹æ®å“åº”å¼åŸç†ï¼Œä¼šè§¦å‘å±æ€§çš„<code>setter</code>ï¼Œè¿›è€Œå­ç»„ä»¶å¯ä»¥é‡æ–°æ¸²æŸ“ã€‚</li> <li>å¯¹è±¡<code>props</code>å†…éƒ¨å±æ€§å˜åŒ–ï¼šå½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œå¹¶æ²¡æœ‰è§¦å‘å­ç»„ä»¶<code>prop</code>çš„æ›´æ–°ï¼Œä½†æ˜¯åœ¨å­ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™è¯»å–åˆ°äº†<code>props</code>ï¼Œå› æ­¤ä¼šæ”¶é›†åˆ°è¿™ä¸ª<code>props</code>çš„<code>render watcher</code>ï¼Œå½“å¯¹è±¡<code>props</code>å†…éƒ¨å±æ€§å˜åŒ–çš„æ—¶å€™ï¼Œæ ¹æ®å“åº”å¼åŸç†ä¾ç„¶ä¼šè§¦å‘<code>setter</code>ï¼Œè¿›è€Œå­ç»„ä»¶å¯ä»¥é‡æ–°è¿›è¡Œæ¸²æŸ“ã€‚</li></ul> <h2 id="toggleobservingä½œç”¨"><a href="#toggleobservingä½œç”¨" class="header-anchor">#</a> toggleObservingä½œç”¨</h2> <p><code>toggleObserving</code>æ˜¯å®šä¹‰åœ¨<code>src/core/observer/index.js</code>æ–‡ä»¶ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä»£ç å¾ˆç®€å•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">let</span> <span class="token literal-property property">shouldObserve</span><span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">toggleObserving</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shouldObserve <span class="token operator">=</span> value
<span class="token punctuation">}</span>
</code></pre></div><p>å®ƒçš„ä½œç”¨å°±æ˜¯ä¿®æ”¹å½“å‰æ¨¡å—çš„<code>shouldObserve</code>å˜é‡ï¼Œç”¨æ¥æ§åˆ¶åœ¨<code>observe</code>çš„è¿‡ç¨‹ä¸­æ˜¯å¦éœ€è¦æŠŠå½“å‰å€¼å˜æˆä¸€ä¸ª<code>observer</code>å¯¹è±¡ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">observe</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">asRootData</span><span class="token operator">:</span> <span class="token operator">?</span>boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> Observer <span class="token operator">|</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">||</span> value <span class="token keyword">instanceof</span> <span class="token class-name">VNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> <span class="token literal-property property">ob</span><span class="token operator">:</span> Observer <span class="token operator">|</span> <span class="token keyword">void</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">'__ob__'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>__ob__ <span class="token keyword">instanceof</span> <span class="token class-name">Observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ob <span class="token operator">=</span> value<span class="token punctuation">.</span>__ob__
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
    shouldObserve <span class="token operator">&amp;&amp;</span>
    <span class="token operator">!</span><span class="token function">isServerRendering</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isPlainObject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token operator">!</span>value<span class="token punctuation">.</span>_isVue
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>asRootData <span class="token operator">&amp;&amp;</span> ob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ob<span class="token punctuation">.</span>vmCount<span class="token operator">++</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> ob
<span class="token punctuation">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ†æï¼Œåœ¨å¤„ç†<code>props</code>çš„è¿‡ç¨‹ä¸­ï¼Œä»€ä¹ˆæ—¶å€™<code>toggleObserving(true)</code>ï¼Œä»€ä¹ˆæ—¶å€™<code>toggleObserving(false)</code>ä»¥åŠä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·å¤„ç†ï¼Ÿ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">initProps</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">vm</span><span class="token operator">:</span> Component<span class="token punctuation">,</span> <span class="token literal-property property">propsOptions</span><span class="token operator">:</span> Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isRoot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// çœç•¥defineReactiveçš„è¿‡ç¨‹</span>
  <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>props</code>åˆå§‹åŒ–çš„æ—¶å€™ï¼š<br>
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨æœ€å¼€å§‹åˆ¤æ–­äº†å½“ä¸ºéæ ¹å®ä¾‹(å­ç»„ä»¶)çš„æ—¶å€™ï¼Œè¿›è¡Œäº†<code>toggleObserving(false)</code>çš„æ“ä½œï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å› ä¸ºï¼šå½“éæ ¹å®ä¾‹çš„æ—¶å€™ï¼Œç»„ä»¶çš„<code>props</code>æ¥è‡ªäºçˆ¶ç»„ä»¶ã€‚å½“<code>props</code>ä¸ºå¯¹è±¡æˆ–è€…æ•°ç»„æ—¶ï¼Œæ ¹æ®å“åº”å¼åŸç†ï¼Œæˆ‘ä»¬ä¼šé€’å½’éå†å­å±æ€§ç„¶åè¿›è¡Œ<code>observe(val)</code>ï¼Œè€Œæ­£æ˜¯å› ä¸º<code>props</code>æ¥æºäºçˆ¶ç»„ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®å·²ç»åœ¨çˆ¶ç»„ä»¶æ‰§è¡Œè¿‡äº†ï¼Œå¦‚æœä¸åšä»»ä½•é™åˆ¶ï¼Œé‚£ä¹ˆä¼šåœ¨å­ç»„ä»¶ä¸­åˆé‡å¤ä¸€æ¬¡è¿™æ ·çš„è¿‡ç¨‹ï¼Œå› æ­¤è¿™é‡Œéœ€è¦<code>toggleObserving(false)</code>ï¼Œç”¨æ¥é¿å…é€’å½’<code>props</code>å­å±æ€§çš„æƒ…å†µï¼Œè¿™å±äºå“åº”å¼ä¼˜åŒ–çš„ä¸€ç§æ‰‹æ®µã€‚åœ¨ä»£ç æœ€åï¼Œåˆè°ƒç”¨äº†<code>toggleObserving(true)</code>ï¼ŒæŠŠ<code>shouldObserve</code>çš„å€¼è¿˜åŸã€‚</p> <p><code>props</code>æ ¡éªŒçš„æ—¶å€™ï¼š<br>
æˆ‘ä»¬å…ˆæ¥çœ‹<code>props</code>æä¾›äº†<code>default</code>é»˜è®¤å€¼ï¼Œä¸”é»˜è®¤å€¼è¿”å›äº†å¯¹è±¡æˆ–è€…æ•°ç»„ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯¹äºä»¥ä¸Š<code>point</code>å’Œ<code>list</code>å–é»˜è®¤å€¼çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™çš„<code>props</code>å€¼ä¸çˆ¶ç»„ä»¶æ²¡æœ‰å…³ç³»ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦<code>toggleObserving(true)</code>ï¼Œåœ¨<code>observe</code>åå†æŠŠ<code>shouldObserve</code>å˜é‡è®¾ç½®ä¸ºåŸæ¥çš„å€¼ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">validateProp</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// çœç•¥ä»£ç </span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> <span class="token function">getPropDefaultValue</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token keyword">const</span> prevShouldObserve <span class="token operator">=</span> shouldObserve 
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token function">observe</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span>prevShouldObserve<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨<code>props</code>æ›´æ–°çš„æ—¶å€™ï¼š<br>
å½“çˆ¶ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨<code>updateChildComponent()</code>æ–¹æ³•ï¼Œç”¨æ¥æ›´æ–°å­ç»„ä»¶çš„<code>props</code>å€¼ï¼Œè¿™ä¸ªæ—¶å€™å…¶å®å’Œ<code>props</code>åˆå§‹åŒ–çš„é€»è¾‘ä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·ä¸éœ€è¦å¯¹æŒ‡å‘çˆ¶ç»„ä»¶çš„å¯¹è±¡æˆ–æ•°ç»„<code>props</code>è¿›è¡Œé€’å½’å­å±æ€§<code>observe</code>çš„è¿‡ç¨‹ï¼Œå› æ­¤è¿™é‡Œéœ€è¦æ‰§è¡Œ<code>toggleObserving(false)</code>ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">updateChildComponent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// update props</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>propsData <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> props <span class="token operator">=</span> vm<span class="token punctuation">.</span>_props
    <span class="token keyword">const</span> propKeys <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_propKeys <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> propKeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> key <span class="token operator">=</span> propKeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">const</span> <span class="token literal-property property">propOptions</span><span class="token operator">:</span> any <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>props <span class="token comment">// wtf flow?</span>
      props<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">validateProp</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> propOptions<span class="token punctuation">,</span> propsData<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">toggleObserving</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>propsData <span class="token operator">=</span> propsData
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æ•´ä½“æµç¨‹å›¾"><a href="#æ•´ä½“æµç¨‹å›¾" class="header-anchor">#</a> æ•´ä½“æµç¨‹å›¾</h2> <p>åœ¨åˆ†æå®Œä»¥ä¸Šæ‰€æœ‰ä¸<code>props</code>ç›¸å…³çš„é€»è¾‘åï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å¦‚ä¸‹æµç¨‹å›¾ã€‚
</p><div style="text-align:center;"><img src="/assets/img/props.0063b6ab.png"></div><p></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/vueAnalysis/reactive/prepare.html" class="prev">
        å‰ç½®æ ¸å¿ƒæ¦‚å¿µ
      </a></span> <span class="next"><a href="/vueAnalysis/reactive/methods.html">
        methodså¤„ç†
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><APlayer audio="" fixed="true" autoplay="autoplay" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/assets/js/app.79e3517d.js" defer></script><script src="/assets/js/7.dfd2726a.js" defer></script><script src="/assets/js/52.047a485a.js" defer></script>
  </body>
</html>
