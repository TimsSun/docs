(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{652:function(t,s,a){t.exports=a.p+"assets/img/google1.d1964ecf.png"},653:function(t,s,a){t.exports=a.p+"assets/img/google2.0e5c8a80.png"},654:function(t,s,a){t.exports=a.p+"assets/img/google3.9a4da27f.png"},655:function(t,s,a){t.exports=a.p+"assets/img/google4.1b677527.png"},656:function(t,s,a){t.exports=a.p+"assets/img/google5.995b6cba.png"},657:function(t,s,a){t.exports=a.p+"assets/img/google6.07e5f1ef.png"},658:function(t,s,a){t.exports=a.p+"assets/img/google7.bcfc87ca.png"},900:function(t,s,a){"use strict";a.r(s);var o=a(2),e=Object(o.a)({},(function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"google"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#google"}},[t._v("#")]),t._v(" Google")]),t._v(" "),o("h2",{attrs:{id:"实现-google-第三方授权登录"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#实现-google-第三方授权登录"}},[t._v("#")]),t._v(" 实现 Google 第三方授权登录")]),t._v(" "),o("p",[t._v("目前Google的第三方登录有很多方案，且官方提供SDK方便接入。但是我这个项目同时要实现网页和客户端。所以选择了 "),o("a",{attrs:{href:"https://developers.google.com/identity/protocols/oauth2",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google OAuth 2.0"),o("OutboundLink")],1),t._v(" 的方案。")]),t._v(" "),o("p",[o("img",{attrs:{src:a(652),alt:"img"}}),t._v(" "),o("br")]),t._v(" "),o("h2",{attrs:{id:"配置-google-cloud-platform"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#配置-google-cloud-platform"}},[t._v("#")]),t._v(" 配置 Google Cloud Platform")]),t._v(" "),o("h3",{attrs:{id:"首先访问-google-cloud-platform-控制台"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#首先访问-google-cloud-platform-控制台"}},[t._v("#")]),t._v(" 首先访问 Google Cloud Platform 控制台")]),t._v(" "),o("p",[o("strong",[t._v("地址： "),o("a",{attrs:{href:"https://console.cloud.google.com/projectselector2/home?pli=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://console.cloud.google.com/projectselector2/home?pli=1"),o("OutboundLink")],1)])]),t._v(" "),o("p",[o("img",{attrs:{src:a(653),alt:"img"}}),t._v(" "),o("br")]),t._v(" "),o("h2",{attrs:{id:"oauth-同意屏幕"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#oauth-同意屏幕"}},[t._v("#")]),t._v(" OAuth 同意屏幕")]),t._v(" "),o("p",[t._v("在左边的侧边栏中选择 "),o("strong",[t._v("API和服务")])]),t._v(" "),o("p",[o("img",{attrs:{src:a(654),alt:"img"}}),t._v(" "),o("br")]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),o("p",[t._v("测试账户只能添加不能删除且限制100个")])]),t._v(" "),o("p",[o("img",{attrs:{src:a(655),alt:"img"}}),t._v(" "),o("br")]),t._v(" "),o("h3",{attrs:{id:"网域验证"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#网域验证"}},[t._v("#")]),t._v(" 网域验证")]),t._v(" "),o("p",[o("img",{attrs:{src:a(656),alt:"img"}}),t._v(" "),o("br")]),t._v(" "),o("p",[o("img",{attrs:{src:a(657),alt:"img"}}),t._v(" "),o("br")]),t._v(" "),o("h2",{attrs:{id:"凭据"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#凭据"}},[t._v("#")]),t._v(" 凭据")]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),o("p",[t._v("客户端ID用户用户登录，密钥用于服务器验证Token是否有效以及获取用户信息")])]),t._v(" "),o("p",[o("img",{attrs:{src:a(658),alt:"img"}}),t._v(" "),o("br")]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),o("p",[t._v("授权javascript来源和重定向来源要确保域名地址的完整比如www是否有无（且只支持https协议连接）")])]),t._v(" "),o("h2",{attrs:{id:"前端获取用户tokenid"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#前端获取用户tokenid"}},[t._v("#")]),t._v(" 前端获取用户tokenId")]),t._v(" "),o("blockquote",[o("p",[o("strong",[o("code",[t._v("以react为例 通过react-google-login来实现获取用户tokenId")])])])]),t._v(" "),o("div",{staticClass:"language-js extra-class"},[o("pre",{pre:!0,attrs:{class:"language-js"}},[o("code",[t._v("npm install react"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("google"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("login\n\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" GoogleLogin "),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-google-login'")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("GoogleLogin\nclientId"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"658977310***55225"')]),t._v(" "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//clientId 为上图客户端秘钥")]),t._v("\nrender"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),o("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("renderProps")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("renderProps"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onClick"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" disabled"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("renderProps"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("This is my custom Google button"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nbuttonText"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Login"')]),t._v("\nonSuccess"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("responseGoogle"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nonFailure"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("responseGoogle"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ncookiePolicy"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'single_host_origin'")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),o("p",[t._v("通过responseGoogle回调函数可以获得用户的信息，然后获取相对应的tokenId给后端")])])])}),[],!1,null,null,null);s.default=e.exports}}]);